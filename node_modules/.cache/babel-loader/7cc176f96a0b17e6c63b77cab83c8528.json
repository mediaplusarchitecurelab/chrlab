{"ast":null,"code":"/**\n * @author alteredq / http://alteredqualia.com/\n * @author mrdoob / http://mrdoob.com/\n * @author Mugen87 / https://github.com/Mugen87\n */\nimport { Vector3 } from '../math/Vector3.js';\nimport { Color } from '../math/Color.js';\nimport { Object3D } from '../core/Object3D.js';\nimport { Mesh } from '../objects/Mesh.js';\nimport { MeshBasicMaterial } from '../materials/MeshBasicMaterial.js';\nimport { OctahedronBufferGeometry } from '../geometries/OctahedronGeometry.js';\nimport { BufferAttribute } from '../core/BufferAttribute.js';\n\nvar _vector = new Vector3();\n\nvar _color1 = new Color();\n\nvar _color2 = new Color();\n\nfunction HemisphereLightHelper(light, size, color) {\n  Object3D.call(this);\n  this.light = light;\n  this.light.updateMatrixWorld();\n  this.matrix = light.matrixWorld;\n  this.matrixAutoUpdate = false;\n  this.color = color;\n  var geometry = new OctahedronBufferGeometry(size);\n  geometry.rotateY(Math.PI * 0.5);\n  this.material = new MeshBasicMaterial({\n    wireframe: true,\n    fog: false,\n    toneMapped: false\n  });\n  if (this.color === undefined) this.material.vertexColors = true;\n  var position = geometry.getAttribute('position');\n  var colors = new Float32Array(position.count * 3);\n  geometry.setAttribute('color', new BufferAttribute(colors, 3));\n  this.add(new Mesh(geometry, this.material));\n  this.update();\n}\n\nHemisphereLightHelper.prototype = Object.create(Object3D.prototype);\nHemisphereLightHelper.prototype.constructor = HemisphereLightHelper;\n\nHemisphereLightHelper.prototype.dispose = function () {\n  this.children[0].geometry.dispose();\n  this.children[0].material.dispose();\n};\n\nHemisphereLightHelper.prototype.update = function () {\n  var mesh = this.children[0];\n\n  if (this.color !== undefined) {\n    this.material.color.set(this.color);\n  } else {\n    var colors = mesh.geometry.getAttribute('color');\n\n    _color1.copy(this.light.color);\n\n    _color2.copy(this.light.groundColor);\n\n    for (var i = 0, l = colors.count; i < l; i++) {\n      var color = i < l / 2 ? _color1 : _color2;\n      colors.setXYZ(i, color.r, color.g, color.b);\n    }\n\n    colors.needsUpdate = true;\n  }\n\n  mesh.lookAt(_vector.setFromMatrixPosition(this.light.matrixWorld).negate());\n};\n\nexport { HemisphereLightHelper };","map":{"version":3,"sources":["H:/chrlab/src/component/panelComponent/Canvas/threejs/src/helpers/HemisphereLightHelper.js"],"names":["Vector3","Color","Object3D","Mesh","MeshBasicMaterial","OctahedronBufferGeometry","BufferAttribute","_vector","_color1","_color2","HemisphereLightHelper","light","size","color","call","updateMatrixWorld","matrix","matrixWorld","matrixAutoUpdate","geometry","rotateY","Math","PI","material","wireframe","fog","toneMapped","undefined","vertexColors","position","getAttribute","colors","Float32Array","count","setAttribute","add","update","prototype","Object","create","constructor","dispose","children","mesh","set","copy","groundColor","i","l","setXYZ","r","g","b","needsUpdate","lookAt","setFromMatrixPosition","negate"],"mappings":"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","sourcesContent":["/**\n * @author alteredq / http://alteredqualia.com/\n * @author mrdoob / http://mrdoob.com/\n * @author Mugen87 / https://github.com/Mugen87\n */\n\nimport { Vector3 } from '../math/Vector3.js';\nimport { Color } from '../math/Color.js';\nimport { Object3D } from '../core/Object3D.js';\nimport { Mesh } from '../objects/Mesh.js';\nimport { MeshBasicMaterial } from '../materials/MeshBasicMaterial.js';\nimport { OctahedronBufferGeometry } from '../geometries/OctahedronGeometry.js';\nimport { BufferAttribute } from '../core/BufferAttribute.js';\n\nvar _vector = new Vector3();\nvar _color1 = new Color();\nvar _color2 = new Color();\n\nfunction HemisphereLightHelper( light, size, color ) {\n\n\tObject3D.call( this );\n\n\tthis.light = light;\n\tthis.light.updateMatrixWorld();\n\n\tthis.matrix = light.matrixWorld;\n\tthis.matrixAutoUpdate = false;\n\n\tthis.color = color;\n\n\tvar geometry = new OctahedronBufferGeometry( size );\n\tgeometry.rotateY( Math.PI * 0.5 );\n\n\tthis.material = new MeshBasicMaterial( { wireframe: true, fog: false, toneMapped: false } );\n\tif ( this.color === undefined ) this.material.vertexColors = true;\n\n\tvar position = geometry.getAttribute( 'position' );\n\tvar colors = new Float32Array( position.count * 3 );\n\n\tgeometry.setAttribute( 'color', new BufferAttribute( colors, 3 ) );\n\n\tthis.add( new Mesh( geometry, this.material ) );\n\n\tthis.update();\n\n}\n\nHemisphereLightHelper.prototype = Object.create( Object3D.prototype );\nHemisphereLightHelper.prototype.constructor = HemisphereLightHelper;\n\nHemisphereLightHelper.prototype.dispose = function () {\n\n\tthis.children[ 0 ].geometry.dispose();\n\tthis.children[ 0 ].material.dispose();\n\n};\n\nHemisphereLightHelper.prototype.update = function () {\n\n\tvar mesh = this.children[ 0 ];\n\n\tif ( this.color !== undefined ) {\n\n\t\tthis.material.color.set( this.color );\n\n\t} else {\n\n\t\tvar colors = mesh.geometry.getAttribute( 'color' );\n\n\t\t_color1.copy( this.light.color );\n\t\t_color2.copy( this.light.groundColor );\n\n\t\tfor ( var i = 0, l = colors.count; i < l; i ++ ) {\n\n\t\t\tvar color = ( i < ( l / 2 ) ) ? _color1 : _color2;\n\n\t\t\tcolors.setXYZ( i, color.r, color.g, color.b );\n\n\t\t}\n\n\t\tcolors.needsUpdate = true;\n\n\t}\n\n\tmesh.lookAt( _vector.setFromMatrixPosition( this.light.matrixWorld ).negate() );\n\n};\n\n\nexport { HemisphereLightHelper };\n"]},"metadata":{},"sourceType":"module"}