{"ast":null,"code":"import { Vector3 } from './Vector3.js';\n\nvar _v1 = new Vector3();\n\nvar _m1 = new Matrix4();\n\nvar _zero = new Vector3(0, 0, 0);\n\nvar _one = new Vector3(1, 1, 1);\n\nvar _x = new Vector3();\n\nvar _y = new Vector3();\n\nvar _z = new Vector3();\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author supereggbert / http://www.paulbrunt.co.uk/\n * @author philogb / http://blog.thejit.org/\n * @author jordi_ros / http://plattsoft.com\n * @author D1plo1d / http://github.com/D1plo1d\n * @author alteredq / http://alteredqualia.com/\n * @author mikael emtinger / http://gomo.se/\n * @author timknip / http://www.floorplanner.com/\n * @author bhouston / http://clara.io\n * @author WestLangley / http://github.com/WestLangley\n */\n\n\nfunction Matrix4() {\n  this.elements = [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1];\n\n  if (arguments.length > 0) {\n    console.error('THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.');\n  }\n}\n\nObject.assign(Matrix4.prototype, {\n  isMatrix4: true,\n  set: function (n11, n12, n13, n14, n21, n22, n23, n24, n31, n32, n33, n34, n41, n42, n43, n44) {\n    var te = this.elements;\n    te[0] = n11;\n    te[4] = n12;\n    te[8] = n13;\n    te[12] = n14;\n    te[1] = n21;\n    te[5] = n22;\n    te[9] = n23;\n    te[13] = n24;\n    te[2] = n31;\n    te[6] = n32;\n    te[10] = n33;\n    te[14] = n34;\n    te[3] = n41;\n    te[7] = n42;\n    te[11] = n43;\n    te[15] = n44;\n    return this;\n  },\n  identity: function () {\n    this.set(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1);\n    return this;\n  },\n  clone: function () {\n    return new Matrix4().fromArray(this.elements);\n  },\n  copy: function (m) {\n    var te = this.elements;\n    var me = m.elements;\n    te[0] = me[0];\n    te[1] = me[1];\n    te[2] = me[2];\n    te[3] = me[3];\n    te[4] = me[4];\n    te[5] = me[5];\n    te[6] = me[6];\n    te[7] = me[7];\n    te[8] = me[8];\n    te[9] = me[9];\n    te[10] = me[10];\n    te[11] = me[11];\n    te[12] = me[12];\n    te[13] = me[13];\n    te[14] = me[14];\n    te[15] = me[15];\n    return this;\n  },\n  copyPosition: function (m) {\n    var te = this.elements,\n        me = m.elements;\n    te[12] = me[12];\n    te[13] = me[13];\n    te[14] = me[14];\n    return this;\n  },\n  extractBasis: function (xAxis, yAxis, zAxis) {\n    xAxis.setFromMatrixColumn(this, 0);\n    yAxis.setFromMatrixColumn(this, 1);\n    zAxis.setFromMatrixColumn(this, 2);\n    return this;\n  },\n  makeBasis: function (xAxis, yAxis, zAxis) {\n    this.set(xAxis.x, yAxis.x, zAxis.x, 0, xAxis.y, yAxis.y, zAxis.y, 0, xAxis.z, yAxis.z, zAxis.z, 0, 0, 0, 0, 1);\n    return this;\n  },\n  extractRotation: function (m) {\n    // this method does not support reflection matrices\n    var te = this.elements;\n    var me = m.elements;\n\n    var scaleX = 1 / _v1.setFromMatrixColumn(m, 0).length();\n\n    var scaleY = 1 / _v1.setFromMatrixColumn(m, 1).length();\n\n    var scaleZ = 1 / _v1.setFromMatrixColumn(m, 2).length();\n\n    te[0] = me[0] * scaleX;\n    te[1] = me[1] * scaleX;\n    te[2] = me[2] * scaleX;\n    te[3] = 0;\n    te[4] = me[4] * scaleY;\n    te[5] = me[5] * scaleY;\n    te[6] = me[6] * scaleY;\n    te[7] = 0;\n    te[8] = me[8] * scaleZ;\n    te[9] = me[9] * scaleZ;\n    te[10] = me[10] * scaleZ;\n    te[11] = 0;\n    te[12] = 0;\n    te[13] = 0;\n    te[14] = 0;\n    te[15] = 1;\n    return this;\n  },\n  makeRotationFromEuler: function (euler) {\n    if (!(euler && euler.isEuler)) {\n      console.error('THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.');\n    }\n\n    var te = this.elements;\n    var x = euler.x,\n        y = euler.y,\n        z = euler.z;\n    var a = Math.cos(x),\n        b = Math.sin(x);\n    var c = Math.cos(y),\n        d = Math.sin(y);\n    var e = Math.cos(z),\n        f = Math.sin(z);\n\n    if (euler.order === 'XYZ') {\n      var ae = a * e,\n          af = a * f,\n          be = b * e,\n          bf = b * f;\n      te[0] = c * e;\n      te[4] = -c * f;\n      te[8] = d;\n      te[1] = af + be * d;\n      te[5] = ae - bf * d;\n      te[9] = -b * c;\n      te[2] = bf - ae * d;\n      te[6] = be + af * d;\n      te[10] = a * c;\n    } else if (euler.order === 'YXZ') {\n      var ce = c * e,\n          cf = c * f,\n          de = d * e,\n          df = d * f;\n      te[0] = ce + df * b;\n      te[4] = de * b - cf;\n      te[8] = a * d;\n      te[1] = a * f;\n      te[5] = a * e;\n      te[9] = -b;\n      te[2] = cf * b - de;\n      te[6] = df + ce * b;\n      te[10] = a * c;\n    } else if (euler.order === 'ZXY') {\n      var ce = c * e,\n          cf = c * f,\n          de = d * e,\n          df = d * f;\n      te[0] = ce - df * b;\n      te[4] = -a * f;\n      te[8] = de + cf * b;\n      te[1] = cf + de * b;\n      te[5] = a * e;\n      te[9] = df - ce * b;\n      te[2] = -a * d;\n      te[6] = b;\n      te[10] = a * c;\n    } else if (euler.order === 'ZYX') {\n      var ae = a * e,\n          af = a * f,\n          be = b * e,\n          bf = b * f;\n      te[0] = c * e;\n      te[4] = be * d - af;\n      te[8] = ae * d + bf;\n      te[1] = c * f;\n      te[5] = bf * d + ae;\n      te[9] = af * d - be;\n      te[2] = -d;\n      te[6] = b * c;\n      te[10] = a * c;\n    } else if (euler.order === 'YZX') {\n      var ac = a * c,\n          ad = a * d,\n          bc = b * c,\n          bd = b * d;\n      te[0] = c * e;\n      te[4] = bd - ac * f;\n      te[8] = bc * f + ad;\n      te[1] = f;\n      te[5] = a * e;\n      te[9] = -b * e;\n      te[2] = -d * e;\n      te[6] = ad * f + bc;\n      te[10] = ac - bd * f;\n    } else if (euler.order === 'XZY') {\n      var ac = a * c,\n          ad = a * d,\n          bc = b * c,\n          bd = b * d;\n      te[0] = c * e;\n      te[4] = -f;\n      te[8] = d * e;\n      te[1] = ac * f + bd;\n      te[5] = a * e;\n      te[9] = ad * f - bc;\n      te[2] = bc * f - ad;\n      te[6] = b * e;\n      te[10] = bd * f + ac;\n    } // bottom row\n\n\n    te[3] = 0;\n    te[7] = 0;\n    te[11] = 0; // last column\n\n    te[12] = 0;\n    te[13] = 0;\n    te[14] = 0;\n    te[15] = 1;\n    return this;\n  },\n  makeRotationFromQuaternion: function (q) {\n    return this.compose(_zero, q, _one);\n  },\n  lookAt: function (eye, target, up) {\n    var te = this.elements;\n\n    _z.subVectors(eye, target);\n\n    if (_z.lengthSq() === 0) {\n      // eye and target are in the same position\n      _z.z = 1;\n    }\n\n    _z.normalize();\n\n    _x.crossVectors(up, _z);\n\n    if (_x.lengthSq() === 0) {\n      // up and z are parallel\n      if (Math.abs(up.z) === 1) {\n        _z.x += 0.0001;\n      } else {\n        _z.z += 0.0001;\n      }\n\n      _z.normalize();\n\n      _x.crossVectors(up, _z);\n    }\n\n    _x.normalize();\n\n    _y.crossVectors(_z, _x);\n\n    te[0] = _x.x;\n    te[4] = _y.x;\n    te[8] = _z.x;\n    te[1] = _x.y;\n    te[5] = _y.y;\n    te[9] = _z.y;\n    te[2] = _x.z;\n    te[6] = _y.z;\n    te[10] = _z.z;\n    return this;\n  },\n  multiply: function (m, n) {\n    if (n !== undefined) {\n      console.warn('THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead.');\n      return this.multiplyMatrices(m, n);\n    }\n\n    return this.multiplyMatrices(this, m);\n  },\n  premultiply: function (m) {\n    return this.multiplyMatrices(m, this);\n  },\n  multiplyMatrices: function (a, b) {\n    var ae = a.elements;\n    var be = b.elements;\n    var te = this.elements;\n    var a11 = ae[0],\n        a12 = ae[4],\n        a13 = ae[8],\n        a14 = ae[12];\n    var a21 = ae[1],\n        a22 = ae[5],\n        a23 = ae[9],\n        a24 = ae[13];\n    var a31 = ae[2],\n        a32 = ae[6],\n        a33 = ae[10],\n        a34 = ae[14];\n    var a41 = ae[3],\n        a42 = ae[7],\n        a43 = ae[11],\n        a44 = ae[15];\n    var b11 = be[0],\n        b12 = be[4],\n        b13 = be[8],\n        b14 = be[12];\n    var b21 = be[1],\n        b22 = be[5],\n        b23 = be[9],\n        b24 = be[13];\n    var b31 = be[2],\n        b32 = be[6],\n        b33 = be[10],\n        b34 = be[14];\n    var b41 = be[3],\n        b42 = be[7],\n        b43 = be[11],\n        b44 = be[15];\n    te[0] = a11 * b11 + a12 * b21 + a13 * b31 + a14 * b41;\n    te[4] = a11 * b12 + a12 * b22 + a13 * b32 + a14 * b42;\n    te[8] = a11 * b13 + a12 * b23 + a13 * b33 + a14 * b43;\n    te[12] = a11 * b14 + a12 * b24 + a13 * b34 + a14 * b44;\n    te[1] = a21 * b11 + a22 * b21 + a23 * b31 + a24 * b41;\n    te[5] = a21 * b12 + a22 * b22 + a23 * b32 + a24 * b42;\n    te[9] = a21 * b13 + a22 * b23 + a23 * b33 + a24 * b43;\n    te[13] = a21 * b14 + a22 * b24 + a23 * b34 + a24 * b44;\n    te[2] = a31 * b11 + a32 * b21 + a33 * b31 + a34 * b41;\n    te[6] = a31 * b12 + a32 * b22 + a33 * b32 + a34 * b42;\n    te[10] = a31 * b13 + a32 * b23 + a33 * b33 + a34 * b43;\n    te[14] = a31 * b14 + a32 * b24 + a33 * b34 + a34 * b44;\n    te[3] = a41 * b11 + a42 * b21 + a43 * b31 + a44 * b41;\n    te[7] = a41 * b12 + a42 * b22 + a43 * b32 + a44 * b42;\n    te[11] = a41 * b13 + a42 * b23 + a43 * b33 + a44 * b43;\n    te[15] = a41 * b14 + a42 * b24 + a43 * b34 + a44 * b44;\n    return this;\n  },\n  multiplyScalar: function (s) {\n    var te = this.elements;\n    te[0] *= s;\n    te[4] *= s;\n    te[8] *= s;\n    te[12] *= s;\n    te[1] *= s;\n    te[5] *= s;\n    te[9] *= s;\n    te[13] *= s;\n    te[2] *= s;\n    te[6] *= s;\n    te[10] *= s;\n    te[14] *= s;\n    te[3] *= s;\n    te[7] *= s;\n    te[11] *= s;\n    te[15] *= s;\n    return this;\n  },\n  determinant: function () {\n    var te = this.elements;\n    var n11 = te[0],\n        n12 = te[4],\n        n13 = te[8],\n        n14 = te[12];\n    var n21 = te[1],\n        n22 = te[5],\n        n23 = te[9],\n        n24 = te[13];\n    var n31 = te[2],\n        n32 = te[6],\n        n33 = te[10],\n        n34 = te[14];\n    var n41 = te[3],\n        n42 = te[7],\n        n43 = te[11],\n        n44 = te[15]; //TODO: make this more efficient\n    //( based on http://www.euclideanspace.com/maths/algebra/matrix/functions/inverse/fourD/index.htm )\n\n    return n41 * (+n14 * n23 * n32 - n13 * n24 * n32 - n14 * n22 * n33 + n12 * n24 * n33 + n13 * n22 * n34 - n12 * n23 * n34) + n42 * (+n11 * n23 * n34 - n11 * n24 * n33 + n14 * n21 * n33 - n13 * n21 * n34 + n13 * n24 * n31 - n14 * n23 * n31) + n43 * (+n11 * n24 * n32 - n11 * n22 * n34 - n14 * n21 * n32 + n12 * n21 * n34 + n14 * n22 * n31 - n12 * n24 * n31) + n44 * (-n13 * n22 * n31 - n11 * n23 * n32 + n11 * n22 * n33 + n13 * n21 * n32 - n12 * n21 * n33 + n12 * n23 * n31);\n  },\n  transpose: function () {\n    var te = this.elements;\n    var tmp;\n    tmp = te[1];\n    te[1] = te[4];\n    te[4] = tmp;\n    tmp = te[2];\n    te[2] = te[8];\n    te[8] = tmp;\n    tmp = te[6];\n    te[6] = te[9];\n    te[9] = tmp;\n    tmp = te[3];\n    te[3] = te[12];\n    te[12] = tmp;\n    tmp = te[7];\n    te[7] = te[13];\n    te[13] = tmp;\n    tmp = te[11];\n    te[11] = te[14];\n    te[14] = tmp;\n    return this;\n  },\n  setPosition: function (x, y, z) {\n    var te = this.elements;\n\n    if (x.isVector3) {\n      te[12] = x.x;\n      te[13] = x.y;\n      te[14] = x.z;\n    } else {\n      te[12] = x;\n      te[13] = y;\n      te[14] = z;\n    }\n\n    return this;\n  },\n  getInverse: function (m, throwOnDegenerate) {\n    if (throwOnDegenerate !== undefined) {\n      console.warn(\"THREE.Matrix4: .getInverse() can no longer be configured to throw on degenerate.\");\n    } // based on http://www.euclideanspace.com/maths/algebra/matrix/functions/inverse/fourD/index.htm\n\n\n    var te = this.elements,\n        me = m.elements,\n        n11 = me[0],\n        n21 = me[1],\n        n31 = me[2],\n        n41 = me[3],\n        n12 = me[4],\n        n22 = me[5],\n        n32 = me[6],\n        n42 = me[7],\n        n13 = me[8],\n        n23 = me[9],\n        n33 = me[10],\n        n43 = me[11],\n        n14 = me[12],\n        n24 = me[13],\n        n34 = me[14],\n        n44 = me[15],\n        t11 = n23 * n34 * n42 - n24 * n33 * n42 + n24 * n32 * n43 - n22 * n34 * n43 - n23 * n32 * n44 + n22 * n33 * n44,\n        t12 = n14 * n33 * n42 - n13 * n34 * n42 - n14 * n32 * n43 + n12 * n34 * n43 + n13 * n32 * n44 - n12 * n33 * n44,\n        t13 = n13 * n24 * n42 - n14 * n23 * n42 + n14 * n22 * n43 - n12 * n24 * n43 - n13 * n22 * n44 + n12 * n23 * n44,\n        t14 = n14 * n23 * n32 - n13 * n24 * n32 - n14 * n22 * n33 + n12 * n24 * n33 + n13 * n22 * n34 - n12 * n23 * n34;\n    var det = n11 * t11 + n21 * t12 + n31 * t13 + n41 * t14;\n    if (det === 0) return this.set(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0);\n    var detInv = 1 / det;\n    te[0] = t11 * detInv;\n    te[1] = (n24 * n33 * n41 - n23 * n34 * n41 - n24 * n31 * n43 + n21 * n34 * n43 + n23 * n31 * n44 - n21 * n33 * n44) * detInv;\n    te[2] = (n22 * n34 * n41 - n24 * n32 * n41 + n24 * n31 * n42 - n21 * n34 * n42 - n22 * n31 * n44 + n21 * n32 * n44) * detInv;\n    te[3] = (n23 * n32 * n41 - n22 * n33 * n41 - n23 * n31 * n42 + n21 * n33 * n42 + n22 * n31 * n43 - n21 * n32 * n43) * detInv;\n    te[4] = t12 * detInv;\n    te[5] = (n13 * n34 * n41 - n14 * n33 * n41 + n14 * n31 * n43 - n11 * n34 * n43 - n13 * n31 * n44 + n11 * n33 * n44) * detInv;\n    te[6] = (n14 * n32 * n41 - n12 * n34 * n41 - n14 * n31 * n42 + n11 * n34 * n42 + n12 * n31 * n44 - n11 * n32 * n44) * detInv;\n    te[7] = (n12 * n33 * n41 - n13 * n32 * n41 + n13 * n31 * n42 - n11 * n33 * n42 - n12 * n31 * n43 + n11 * n32 * n43) * detInv;\n    te[8] = t13 * detInv;\n    te[9] = (n14 * n23 * n41 - n13 * n24 * n41 - n14 * n21 * n43 + n11 * n24 * n43 + n13 * n21 * n44 - n11 * n23 * n44) * detInv;\n    te[10] = (n12 * n24 * n41 - n14 * n22 * n41 + n14 * n21 * n42 - n11 * n24 * n42 - n12 * n21 * n44 + n11 * n22 * n44) * detInv;\n    te[11] = (n13 * n22 * n41 - n12 * n23 * n41 - n13 * n21 * n42 + n11 * n23 * n42 + n12 * n21 * n43 - n11 * n22 * n43) * detInv;\n    te[12] = t14 * detInv;\n    te[13] = (n13 * n24 * n31 - n14 * n23 * n31 + n14 * n21 * n33 - n11 * n24 * n33 - n13 * n21 * n34 + n11 * n23 * n34) * detInv;\n    te[14] = (n14 * n22 * n31 - n12 * n24 * n31 - n14 * n21 * n32 + n11 * n24 * n32 + n12 * n21 * n34 - n11 * n22 * n34) * detInv;\n    te[15] = (n12 * n23 * n31 - n13 * n22 * n31 + n13 * n21 * n32 - n11 * n23 * n32 - n12 * n21 * n33 + n11 * n22 * n33) * detInv;\n    return this;\n  },\n  scale: function (v) {\n    var te = this.elements;\n    var x = v.x,\n        y = v.y,\n        z = v.z;\n    te[0] *= x;\n    te[4] *= y;\n    te[8] *= z;\n    te[1] *= x;\n    te[5] *= y;\n    te[9] *= z;\n    te[2] *= x;\n    te[6] *= y;\n    te[10] *= z;\n    te[3] *= x;\n    te[7] *= y;\n    te[11] *= z;\n    return this;\n  },\n  getMaxScaleOnAxis: function () {\n    var te = this.elements;\n    var scaleXSq = te[0] * te[0] + te[1] * te[1] + te[2] * te[2];\n    var scaleYSq = te[4] * te[4] + te[5] * te[5] + te[6] * te[6];\n    var scaleZSq = te[8] * te[8] + te[9] * te[9] + te[10] * te[10];\n    return Math.sqrt(Math.max(scaleXSq, scaleYSq, scaleZSq));\n  },\n  makeTranslation: function (x, y, z) {\n    this.set(1, 0, 0, x, 0, 1, 0, y, 0, 0, 1, z, 0, 0, 0, 1);\n    return this;\n  },\n  makeRotationX: function (theta) {\n    var c = Math.cos(theta),\n        s = Math.sin(theta);\n    this.set(1, 0, 0, 0, 0, c, -s, 0, 0, s, c, 0, 0, 0, 0, 1);\n    return this;\n  },\n  makeRotationY: function (theta) {\n    var c = Math.cos(theta),\n        s = Math.sin(theta);\n    this.set(c, 0, s, 0, 0, 1, 0, 0, -s, 0, c, 0, 0, 0, 0, 1);\n    return this;\n  },\n  makeRotationZ: function (theta) {\n    var c = Math.cos(theta),\n        s = Math.sin(theta);\n    this.set(c, -s, 0, 0, s, c, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1);\n    return this;\n  },\n  makeRotationAxis: function (axis, angle) {\n    // Based on http://www.gamedev.net/reference/articles/article1199.asp\n    var c = Math.cos(angle);\n    var s = Math.sin(angle);\n    var t = 1 - c;\n    var x = axis.x,\n        y = axis.y,\n        z = axis.z;\n    var tx = t * x,\n        ty = t * y;\n    this.set(tx * x + c, tx * y - s * z, tx * z + s * y, 0, tx * y + s * z, ty * y + c, ty * z - s * x, 0, tx * z - s * y, ty * z + s * x, t * z * z + c, 0, 0, 0, 0, 1);\n    return this;\n  },\n  makeScale: function (x, y, z) {\n    this.set(x, 0, 0, 0, 0, y, 0, 0, 0, 0, z, 0, 0, 0, 0, 1);\n    return this;\n  },\n  makeShear: function (x, y, z) {\n    this.set(1, y, z, 0, x, 1, z, 0, x, y, 1, 0, 0, 0, 0, 1);\n    return this;\n  },\n  compose: function (position, quaternion, scale) {\n    var te = this.elements;\n    var x = quaternion._x,\n        y = quaternion._y,\n        z = quaternion._z,\n        w = quaternion._w;\n    var x2 = x + x,\n        y2 = y + y,\n        z2 = z + z;\n    var xx = x * x2,\n        xy = x * y2,\n        xz = x * z2;\n    var yy = y * y2,\n        yz = y * z2,\n        zz = z * z2;\n    var wx = w * x2,\n        wy = w * y2,\n        wz = w * z2;\n    var sx = scale.x,\n        sy = scale.y,\n        sz = scale.z;\n    te[0] = (1 - (yy + zz)) * sx;\n    te[1] = (xy + wz) * sx;\n    te[2] = (xz - wy) * sx;\n    te[3] = 0;\n    te[4] = (xy - wz) * sy;\n    te[5] = (1 - (xx + zz)) * sy;\n    te[6] = (yz + wx) * sy;\n    te[7] = 0;\n    te[8] = (xz + wy) * sz;\n    te[9] = (yz - wx) * sz;\n    te[10] = (1 - (xx + yy)) * sz;\n    te[11] = 0;\n    te[12] = position.x;\n    te[13] = position.y;\n    te[14] = position.z;\n    te[15] = 1;\n    return this;\n  },\n  decompose: function (position, quaternion, scale) {\n    var te = this.elements;\n\n    var sx = _v1.set(te[0], te[1], te[2]).length();\n\n    var sy = _v1.set(te[4], te[5], te[6]).length();\n\n    var sz = _v1.set(te[8], te[9], te[10]).length(); // if determine is negative, we need to invert one scale\n\n\n    var det = this.determinant();\n    if (det < 0) sx = -sx;\n    position.x = te[12];\n    position.y = te[13];\n    position.z = te[14]; // scale the rotation part\n\n    _m1.copy(this);\n\n    var invSX = 1 / sx;\n    var invSY = 1 / sy;\n    var invSZ = 1 / sz;\n    _m1.elements[0] *= invSX;\n    _m1.elements[1] *= invSX;\n    _m1.elements[2] *= invSX;\n    _m1.elements[4] *= invSY;\n    _m1.elements[5] *= invSY;\n    _m1.elements[6] *= invSY;\n    _m1.elements[8] *= invSZ;\n    _m1.elements[9] *= invSZ;\n    _m1.elements[10] *= invSZ;\n    quaternion.setFromRotationMatrix(_m1);\n    scale.x = sx;\n    scale.y = sy;\n    scale.z = sz;\n    return this;\n  },\n  makePerspective: function (left, right, top, bottom, near, far) {\n    if (far === undefined) {\n      console.warn('THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.');\n    }\n\n    var te = this.elements;\n    var x = 2 * near / (right - left);\n    var y = 2 * near / (top - bottom);\n    var a = (right + left) / (right - left);\n    var b = (top + bottom) / (top - bottom);\n    var c = -(far + near) / (far - near);\n    var d = -2 * far * near / (far - near);\n    te[0] = x;\n    te[4] = 0;\n    te[8] = a;\n    te[12] = 0;\n    te[1] = 0;\n    te[5] = y;\n    te[9] = b;\n    te[13] = 0;\n    te[2] = 0;\n    te[6] = 0;\n    te[10] = c;\n    te[14] = d;\n    te[3] = 0;\n    te[7] = 0;\n    te[11] = -1;\n    te[15] = 0;\n    return this;\n  },\n  makeOrthographic: function (left, right, top, bottom, near, far) {\n    var te = this.elements;\n    var w = 1.0 / (right - left);\n    var h = 1.0 / (top - bottom);\n    var p = 1.0 / (far - near);\n    var x = (right + left) * w;\n    var y = (top + bottom) * h;\n    var z = (far + near) * p;\n    te[0] = 2 * w;\n    te[4] = 0;\n    te[8] = 0;\n    te[12] = -x;\n    te[1] = 0;\n    te[5] = 2 * h;\n    te[9] = 0;\n    te[13] = -y;\n    te[2] = 0;\n    te[6] = 0;\n    te[10] = -2 * p;\n    te[14] = -z;\n    te[3] = 0;\n    te[7] = 0;\n    te[11] = 0;\n    te[15] = 1;\n    return this;\n  },\n  equals: function (matrix) {\n    var te = this.elements;\n    var me = matrix.elements;\n\n    for (var i = 0; i < 16; i++) {\n      if (te[i] !== me[i]) return false;\n    }\n\n    return true;\n  },\n  fromArray: function (array, offset) {\n    if (offset === undefined) offset = 0;\n\n    for (var i = 0; i < 16; i++) {\n      this.elements[i] = array[i + offset];\n    }\n\n    return this;\n  },\n  toArray: function (array, offset) {\n    if (array === undefined) array = [];\n    if (offset === undefined) offset = 0;\n    var te = this.elements;\n    array[offset] = te[0];\n    array[offset + 1] = te[1];\n    array[offset + 2] = te[2];\n    array[offset + 3] = te[3];\n    array[offset + 4] = te[4];\n    array[offset + 5] = te[5];\n    array[offset + 6] = te[6];\n    array[offset + 7] = te[7];\n    array[offset + 8] = te[8];\n    array[offset + 9] = te[9];\n    array[offset + 10] = te[10];\n    array[offset + 11] = te[11];\n    array[offset + 12] = te[12];\n    array[offset + 13] = te[13];\n    array[offset + 14] = te[14];\n    array[offset + 15] = te[15];\n    return array;\n  }\n});\nexport { Matrix4 };","map":{"version":3,"sources":["D:/chrlab/src/component/panelComponent/Canvas/threejs/src/math/Matrix4.js"],"names":["Vector3","_v1","_m1","Matrix4","_zero","_one","_x","_y","_z","elements","arguments","length","console","error","Object","assign","prototype","isMatrix4","set","n11","n12","n13","n14","n21","n22","n23","n24","n31","n32","n33","n34","n41","n42","n43","n44","te","identity","clone","fromArray","copy","m","me","copyPosition","extractBasis","xAxis","yAxis","zAxis","setFromMatrixColumn","makeBasis","x","y","z","extractRotation","scaleX","scaleY","scaleZ","makeRotationFromEuler","euler","isEuler","a","Math","cos","b","sin","c","d","e","f","order","ae","af","be","bf","ce","cf","de","df","ac","ad","bc","bd","makeRotationFromQuaternion","q","compose","lookAt","eye","target","up","subVectors","lengthSq","normalize","crossVectors","abs","multiply","n","undefined","warn","multiplyMatrices","premultiply","a11","a12","a13","a14","a21","a22","a23","a24","a31","a32","a33","a34","a41","a42","a43","a44","b11","b12","b13","b14","b21","b22","b23","b24","b31","b32","b33","b34","b41","b42","b43","b44","multiplyScalar","s","determinant","transpose","tmp","setPosition","isVector3","getInverse","throwOnDegenerate","t11","t12","t13","t14","det","detInv","scale","v","getMaxScaleOnAxis","scaleXSq","scaleYSq","scaleZSq","sqrt","max","makeTranslation","makeRotationX","theta","makeRotationY","makeRotationZ","makeRotationAxis","axis","angle","t","tx","ty","makeScale","makeShear","position","quaternion","w","_w","x2","y2","z2","xx","xy","xz","yy","yz","zz","wx","wy","wz","sx","sy","sz","decompose","invSX","invSY","invSZ","setFromRotationMatrix","makePerspective","left","right","top","bottom","near","far","makeOrthographic","h","p","equals","matrix","i","array","offset","toArray"],"mappings":"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","sourcesContent":["import { Vector3 } from './Vector3.js';\n\nvar _v1 = new Vector3();\nvar _m1 = new Matrix4();\nvar _zero = new Vector3( 0, 0, 0 );\nvar _one = new Vector3( 1, 1, 1 );\nvar _x = new Vector3();\nvar _y = new Vector3();\nvar _z = new Vector3();\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author supereggbert / http://www.paulbrunt.co.uk/\n * @author philogb / http://blog.thejit.org/\n * @author jordi_ros / http://plattsoft.com\n * @author D1plo1d / http://github.com/D1plo1d\n * @author alteredq / http://alteredqualia.com/\n * @author mikael emtinger / http://gomo.se/\n * @author timknip / http://www.floorplanner.com/\n * @author bhouston / http://clara.io\n * @author WestLangley / http://github.com/WestLangley\n */\n\nfunction Matrix4() {\n\n\tthis.elements = [\n\n\t\t1, 0, 0, 0,\n\t\t0, 1, 0, 0,\n\t\t0, 0, 1, 0,\n\t\t0, 0, 0, 1\n\n\t];\n\n\tif ( arguments.length > 0 ) {\n\n\t\tconsole.error( 'THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.' );\n\n\t}\n\n}\n\nObject.assign( Matrix4.prototype, {\n\n\tisMatrix4: true,\n\n\tset: function ( n11, n12, n13, n14, n21, n22, n23, n24, n31, n32, n33, n34, n41, n42, n43, n44 ) {\n\n\t\tvar te = this.elements;\n\n\t\tte[ 0 ] = n11; te[ 4 ] = n12; te[ 8 ] = n13; te[ 12 ] = n14;\n\t\tte[ 1 ] = n21; te[ 5 ] = n22; te[ 9 ] = n23; te[ 13 ] = n24;\n\t\tte[ 2 ] = n31; te[ 6 ] = n32; te[ 10 ] = n33; te[ 14 ] = n34;\n\t\tte[ 3 ] = n41; te[ 7 ] = n42; te[ 11 ] = n43; te[ 15 ] = n44;\n\n\t\treturn this;\n\n\t},\n\n\tidentity: function () {\n\n\t\tthis.set(\n\n\t\t\t1, 0, 0, 0,\n\t\t\t0, 1, 0, 0,\n\t\t\t0, 0, 1, 0,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new Matrix4().fromArray( this.elements );\n\n\t},\n\n\tcopy: function ( m ) {\n\n\t\tvar te = this.elements;\n\t\tvar me = m.elements;\n\n\t\tte[ 0 ] = me[ 0 ]; te[ 1 ] = me[ 1 ]; te[ 2 ] = me[ 2 ]; te[ 3 ] = me[ 3 ];\n\t\tte[ 4 ] = me[ 4 ]; te[ 5 ] = me[ 5 ]; te[ 6 ] = me[ 6 ]; te[ 7 ] = me[ 7 ];\n\t\tte[ 8 ] = me[ 8 ]; te[ 9 ] = me[ 9 ]; te[ 10 ] = me[ 10 ]; te[ 11 ] = me[ 11 ];\n\t\tte[ 12 ] = me[ 12 ]; te[ 13 ] = me[ 13 ]; te[ 14 ] = me[ 14 ]; te[ 15 ] = me[ 15 ];\n\n\t\treturn this;\n\n\t},\n\n\tcopyPosition: function ( m ) {\n\n\t\tvar te = this.elements, me = m.elements;\n\n\t\tte[ 12 ] = me[ 12 ];\n\t\tte[ 13 ] = me[ 13 ];\n\t\tte[ 14 ] = me[ 14 ];\n\n\t\treturn this;\n\n\t},\n\n\textractBasis: function ( xAxis, yAxis, zAxis ) {\n\n\t\txAxis.setFromMatrixColumn( this, 0 );\n\t\tyAxis.setFromMatrixColumn( this, 1 );\n\t\tzAxis.setFromMatrixColumn( this, 2 );\n\n\t\treturn this;\n\n\t},\n\n\tmakeBasis: function ( xAxis, yAxis, zAxis ) {\n\n\t\tthis.set(\n\t\t\txAxis.x, yAxis.x, zAxis.x, 0,\n\t\t\txAxis.y, yAxis.y, zAxis.y, 0,\n\t\t\txAxis.z, yAxis.z, zAxis.z, 0,\n\t\t\t0, 0, 0, 1\n\t\t);\n\n\t\treturn this;\n\n\t},\n\n\textractRotation: function ( m ) {\n\n\t\t// this method does not support reflection matrices\n\n\t\tvar te = this.elements;\n\t\tvar me = m.elements;\n\n\t\tvar scaleX = 1 / _v1.setFromMatrixColumn( m, 0 ).length();\n\t\tvar scaleY = 1 / _v1.setFromMatrixColumn( m, 1 ).length();\n\t\tvar scaleZ = 1 / _v1.setFromMatrixColumn( m, 2 ).length();\n\n\t\tte[ 0 ] = me[ 0 ] * scaleX;\n\t\tte[ 1 ] = me[ 1 ] * scaleX;\n\t\tte[ 2 ] = me[ 2 ] * scaleX;\n\t\tte[ 3 ] = 0;\n\n\t\tte[ 4 ] = me[ 4 ] * scaleY;\n\t\tte[ 5 ] = me[ 5 ] * scaleY;\n\t\tte[ 6 ] = me[ 6 ] * scaleY;\n\t\tte[ 7 ] = 0;\n\n\t\tte[ 8 ] = me[ 8 ] * scaleZ;\n\t\tte[ 9 ] = me[ 9 ] * scaleZ;\n\t\tte[ 10 ] = me[ 10 ] * scaleZ;\n\t\tte[ 11 ] = 0;\n\n\t\tte[ 12 ] = 0;\n\t\tte[ 13 ] = 0;\n\t\tte[ 14 ] = 0;\n\t\tte[ 15 ] = 1;\n\n\t\treturn this;\n\n\t},\n\n\tmakeRotationFromEuler: function ( euler ) {\n\n\t\tif ( ! ( euler && euler.isEuler ) ) {\n\n\t\t\tconsole.error( 'THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.' );\n\n\t\t}\n\n\t\tvar te = this.elements;\n\n\t\tvar x = euler.x, y = euler.y, z = euler.z;\n\t\tvar a = Math.cos( x ), b = Math.sin( x );\n\t\tvar c = Math.cos( y ), d = Math.sin( y );\n\t\tvar e = Math.cos( z ), f = Math.sin( z );\n\n\t\tif ( euler.order === 'XYZ' ) {\n\n\t\t\tvar ae = a * e, af = a * f, be = b * e, bf = b * f;\n\n\t\t\tte[ 0 ] = c * e;\n\t\t\tte[ 4 ] = - c * f;\n\t\t\tte[ 8 ] = d;\n\n\t\t\tte[ 1 ] = af + be * d;\n\t\t\tte[ 5 ] = ae - bf * d;\n\t\t\tte[ 9 ] = - b * c;\n\n\t\t\tte[ 2 ] = bf - ae * d;\n\t\t\tte[ 6 ] = be + af * d;\n\t\t\tte[ 10 ] = a * c;\n\n\t\t} else if ( euler.order === 'YXZ' ) {\n\n\t\t\tvar ce = c * e, cf = c * f, de = d * e, df = d * f;\n\n\t\t\tte[ 0 ] = ce + df * b;\n\t\t\tte[ 4 ] = de * b - cf;\n\t\t\tte[ 8 ] = a * d;\n\n\t\t\tte[ 1 ] = a * f;\n\t\t\tte[ 5 ] = a * e;\n\t\t\tte[ 9 ] = - b;\n\n\t\t\tte[ 2 ] = cf * b - de;\n\t\t\tte[ 6 ] = df + ce * b;\n\t\t\tte[ 10 ] = a * c;\n\n\t\t} else if ( euler.order === 'ZXY' ) {\n\n\t\t\tvar ce = c * e, cf = c * f, de = d * e, df = d * f;\n\n\t\t\tte[ 0 ] = ce - df * b;\n\t\t\tte[ 4 ] = - a * f;\n\t\t\tte[ 8 ] = de + cf * b;\n\n\t\t\tte[ 1 ] = cf + de * b;\n\t\t\tte[ 5 ] = a * e;\n\t\t\tte[ 9 ] = df - ce * b;\n\n\t\t\tte[ 2 ] = - a * d;\n\t\t\tte[ 6 ] = b;\n\t\t\tte[ 10 ] = a * c;\n\n\t\t} else if ( euler.order === 'ZYX' ) {\n\n\t\t\tvar ae = a * e, af = a * f, be = b * e, bf = b * f;\n\n\t\t\tte[ 0 ] = c * e;\n\t\t\tte[ 4 ] = be * d - af;\n\t\t\tte[ 8 ] = ae * d + bf;\n\n\t\t\tte[ 1 ] = c * f;\n\t\t\tte[ 5 ] = bf * d + ae;\n\t\t\tte[ 9 ] = af * d - be;\n\n\t\t\tte[ 2 ] = - d;\n\t\t\tte[ 6 ] = b * c;\n\t\t\tte[ 10 ] = a * c;\n\n\t\t} else if ( euler.order === 'YZX' ) {\n\n\t\t\tvar ac = a * c, ad = a * d, bc = b * c, bd = b * d;\n\n\t\t\tte[ 0 ] = c * e;\n\t\t\tte[ 4 ] = bd - ac * f;\n\t\t\tte[ 8 ] = bc * f + ad;\n\n\t\t\tte[ 1 ] = f;\n\t\t\tte[ 5 ] = a * e;\n\t\t\tte[ 9 ] = - b * e;\n\n\t\t\tte[ 2 ] = - d * e;\n\t\t\tte[ 6 ] = ad * f + bc;\n\t\t\tte[ 10 ] = ac - bd * f;\n\n\t\t} else if ( euler.order === 'XZY' ) {\n\n\t\t\tvar ac = a * c, ad = a * d, bc = b * c, bd = b * d;\n\n\t\t\tte[ 0 ] = c * e;\n\t\t\tte[ 4 ] = - f;\n\t\t\tte[ 8 ] = d * e;\n\n\t\t\tte[ 1 ] = ac * f + bd;\n\t\t\tte[ 5 ] = a * e;\n\t\t\tte[ 9 ] = ad * f - bc;\n\n\t\t\tte[ 2 ] = bc * f - ad;\n\t\t\tte[ 6 ] = b * e;\n\t\t\tte[ 10 ] = bd * f + ac;\n\n\t\t}\n\n\t\t// bottom row\n\t\tte[ 3 ] = 0;\n\t\tte[ 7 ] = 0;\n\t\tte[ 11 ] = 0;\n\n\t\t// last column\n\t\tte[ 12 ] = 0;\n\t\tte[ 13 ] = 0;\n\t\tte[ 14 ] = 0;\n\t\tte[ 15 ] = 1;\n\n\t\treturn this;\n\n\t},\n\n\tmakeRotationFromQuaternion: function ( q ) {\n\n\t\treturn this.compose( _zero, q, _one );\n\n\t},\n\n\tlookAt: function ( eye, target, up ) {\n\n\t\tvar te = this.elements;\n\n\t\t_z.subVectors( eye, target );\n\n\t\tif ( _z.lengthSq() === 0 ) {\n\n\t\t\t// eye and target are in the same position\n\n\t\t\t_z.z = 1;\n\n\t\t}\n\n\t\t_z.normalize();\n\t\t_x.crossVectors( up, _z );\n\n\t\tif ( _x.lengthSq() === 0 ) {\n\n\t\t\t// up and z are parallel\n\n\t\t\tif ( Math.abs( up.z ) === 1 ) {\n\n\t\t\t\t_z.x += 0.0001;\n\n\t\t\t} else {\n\n\t\t\t\t_z.z += 0.0001;\n\n\t\t\t}\n\n\t\t\t_z.normalize();\n\t\t\t_x.crossVectors( up, _z );\n\n\t\t}\n\n\t\t_x.normalize();\n\t\t_y.crossVectors( _z, _x );\n\n\t\tte[ 0 ] = _x.x; te[ 4 ] = _y.x; te[ 8 ] = _z.x;\n\t\tte[ 1 ] = _x.y; te[ 5 ] = _y.y; te[ 9 ] = _z.y;\n\t\tte[ 2 ] = _x.z; te[ 6 ] = _y.z; te[ 10 ] = _z.z;\n\n\t\treturn this;\n\n\t},\n\n\tmultiply: function ( m, n ) {\n\n\t\tif ( n !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead.' );\n\t\t\treturn this.multiplyMatrices( m, n );\n\n\t\t}\n\n\t\treturn this.multiplyMatrices( this, m );\n\n\t},\n\n\tpremultiply: function ( m ) {\n\n\t\treturn this.multiplyMatrices( m, this );\n\n\t},\n\n\tmultiplyMatrices: function ( a, b ) {\n\n\t\tvar ae = a.elements;\n\t\tvar be = b.elements;\n\t\tvar te = this.elements;\n\n\t\tvar a11 = ae[ 0 ], a12 = ae[ 4 ], a13 = ae[ 8 ], a14 = ae[ 12 ];\n\t\tvar a21 = ae[ 1 ], a22 = ae[ 5 ], a23 = ae[ 9 ], a24 = ae[ 13 ];\n\t\tvar a31 = ae[ 2 ], a32 = ae[ 6 ], a33 = ae[ 10 ], a34 = ae[ 14 ];\n\t\tvar a41 = ae[ 3 ], a42 = ae[ 7 ], a43 = ae[ 11 ], a44 = ae[ 15 ];\n\n\t\tvar b11 = be[ 0 ], b12 = be[ 4 ], b13 = be[ 8 ], b14 = be[ 12 ];\n\t\tvar b21 = be[ 1 ], b22 = be[ 5 ], b23 = be[ 9 ], b24 = be[ 13 ];\n\t\tvar b31 = be[ 2 ], b32 = be[ 6 ], b33 = be[ 10 ], b34 = be[ 14 ];\n\t\tvar b41 = be[ 3 ], b42 = be[ 7 ], b43 = be[ 11 ], b44 = be[ 15 ];\n\n\t\tte[ 0 ] = a11 * b11 + a12 * b21 + a13 * b31 + a14 * b41;\n\t\tte[ 4 ] = a11 * b12 + a12 * b22 + a13 * b32 + a14 * b42;\n\t\tte[ 8 ] = a11 * b13 + a12 * b23 + a13 * b33 + a14 * b43;\n\t\tte[ 12 ] = a11 * b14 + a12 * b24 + a13 * b34 + a14 * b44;\n\n\t\tte[ 1 ] = a21 * b11 + a22 * b21 + a23 * b31 + a24 * b41;\n\t\tte[ 5 ] = a21 * b12 + a22 * b22 + a23 * b32 + a24 * b42;\n\t\tte[ 9 ] = a21 * b13 + a22 * b23 + a23 * b33 + a24 * b43;\n\t\tte[ 13 ] = a21 * b14 + a22 * b24 + a23 * b34 + a24 * b44;\n\n\t\tte[ 2 ] = a31 * b11 + a32 * b21 + a33 * b31 + a34 * b41;\n\t\tte[ 6 ] = a31 * b12 + a32 * b22 + a33 * b32 + a34 * b42;\n\t\tte[ 10 ] = a31 * b13 + a32 * b23 + a33 * b33 + a34 * b43;\n\t\tte[ 14 ] = a31 * b14 + a32 * b24 + a33 * b34 + a34 * b44;\n\n\t\tte[ 3 ] = a41 * b11 + a42 * b21 + a43 * b31 + a44 * b41;\n\t\tte[ 7 ] = a41 * b12 + a42 * b22 + a43 * b32 + a44 * b42;\n\t\tte[ 11 ] = a41 * b13 + a42 * b23 + a43 * b33 + a44 * b43;\n\t\tte[ 15 ] = a41 * b14 + a42 * b24 + a43 * b34 + a44 * b44;\n\n\t\treturn this;\n\n\t},\n\n\tmultiplyScalar: function ( s ) {\n\n\t\tvar te = this.elements;\n\n\t\tte[ 0 ] *= s; te[ 4 ] *= s; te[ 8 ] *= s; te[ 12 ] *= s;\n\t\tte[ 1 ] *= s; te[ 5 ] *= s; te[ 9 ] *= s; te[ 13 ] *= s;\n\t\tte[ 2 ] *= s; te[ 6 ] *= s; te[ 10 ] *= s; te[ 14 ] *= s;\n\t\tte[ 3 ] *= s; te[ 7 ] *= s; te[ 11 ] *= s; te[ 15 ] *= s;\n\n\t\treturn this;\n\n\t},\n\n\tdeterminant: function () {\n\n\t\tvar te = this.elements;\n\n\t\tvar n11 = te[ 0 ], n12 = te[ 4 ], n13 = te[ 8 ], n14 = te[ 12 ];\n\t\tvar n21 = te[ 1 ], n22 = te[ 5 ], n23 = te[ 9 ], n24 = te[ 13 ];\n\t\tvar n31 = te[ 2 ], n32 = te[ 6 ], n33 = te[ 10 ], n34 = te[ 14 ];\n\t\tvar n41 = te[ 3 ], n42 = te[ 7 ], n43 = te[ 11 ], n44 = te[ 15 ];\n\n\t\t//TODO: make this more efficient\n\t\t//( based on http://www.euclideanspace.com/maths/algebra/matrix/functions/inverse/fourD/index.htm )\n\n\t\treturn (\n\t\t\tn41 * (\n\t\t\t\t+ n14 * n23 * n32\n\t\t\t\t - n13 * n24 * n32\n\t\t\t\t - n14 * n22 * n33\n\t\t\t\t + n12 * n24 * n33\n\t\t\t\t + n13 * n22 * n34\n\t\t\t\t - n12 * n23 * n34\n\t\t\t) +\n\t\t\tn42 * (\n\t\t\t\t+ n11 * n23 * n34\n\t\t\t\t - n11 * n24 * n33\n\t\t\t\t + n14 * n21 * n33\n\t\t\t\t - n13 * n21 * n34\n\t\t\t\t + n13 * n24 * n31\n\t\t\t\t - n14 * n23 * n31\n\t\t\t) +\n\t\t\tn43 * (\n\t\t\t\t+ n11 * n24 * n32\n\t\t\t\t - n11 * n22 * n34\n\t\t\t\t - n14 * n21 * n32\n\t\t\t\t + n12 * n21 * n34\n\t\t\t\t + n14 * n22 * n31\n\t\t\t\t - n12 * n24 * n31\n\t\t\t) +\n\t\t\tn44 * (\n\t\t\t\t- n13 * n22 * n31\n\t\t\t\t - n11 * n23 * n32\n\t\t\t\t + n11 * n22 * n33\n\t\t\t\t + n13 * n21 * n32\n\t\t\t\t - n12 * n21 * n33\n\t\t\t\t + n12 * n23 * n31\n\t\t\t)\n\n\t\t);\n\n\t},\n\n\ttranspose: function () {\n\n\t\tvar te = this.elements;\n\t\tvar tmp;\n\n\t\ttmp = te[ 1 ]; te[ 1 ] = te[ 4 ]; te[ 4 ] = tmp;\n\t\ttmp = te[ 2 ]; te[ 2 ] = te[ 8 ]; te[ 8 ] = tmp;\n\t\ttmp = te[ 6 ]; te[ 6 ] = te[ 9 ]; te[ 9 ] = tmp;\n\n\t\ttmp = te[ 3 ]; te[ 3 ] = te[ 12 ]; te[ 12 ] = tmp;\n\t\ttmp = te[ 7 ]; te[ 7 ] = te[ 13 ]; te[ 13 ] = tmp;\n\t\ttmp = te[ 11 ]; te[ 11 ] = te[ 14 ]; te[ 14 ] = tmp;\n\n\t\treturn this;\n\n\t},\n\n\tsetPosition: function ( x, y, z ) {\n\n\t\tvar te = this.elements;\n\n\t\tif ( x.isVector3 ) {\n\n\t\t\tte[ 12 ] = x.x;\n\t\t\tte[ 13 ] = x.y;\n\t\t\tte[ 14 ] = x.z;\n\n\t\t} else {\n\n\t\t\tte[ 12 ] = x;\n\t\t\tte[ 13 ] = y;\n\t\t\tte[ 14 ] = z;\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tgetInverse: function ( m, throwOnDegenerate ) {\n\n\t\tif ( throwOnDegenerate !== undefined ) {\n\n\t\t\tconsole.warn( \"THREE.Matrix4: .getInverse() can no longer be configured to throw on degenerate.\" );\n\n\t\t}\n\n\t\t// based on http://www.euclideanspace.com/maths/algebra/matrix/functions/inverse/fourD/index.htm\n\t\tvar te = this.elements,\n\t\t\tme = m.elements,\n\n\t\t\tn11 = me[ 0 ], n21 = me[ 1 ], n31 = me[ 2 ], n41 = me[ 3 ],\n\t\t\tn12 = me[ 4 ], n22 = me[ 5 ], n32 = me[ 6 ], n42 = me[ 7 ],\n\t\t\tn13 = me[ 8 ], n23 = me[ 9 ], n33 = me[ 10 ], n43 = me[ 11 ],\n\t\t\tn14 = me[ 12 ], n24 = me[ 13 ], n34 = me[ 14 ], n44 = me[ 15 ],\n\n\t\t\tt11 = n23 * n34 * n42 - n24 * n33 * n42 + n24 * n32 * n43 - n22 * n34 * n43 - n23 * n32 * n44 + n22 * n33 * n44,\n\t\t\tt12 = n14 * n33 * n42 - n13 * n34 * n42 - n14 * n32 * n43 + n12 * n34 * n43 + n13 * n32 * n44 - n12 * n33 * n44,\n\t\t\tt13 = n13 * n24 * n42 - n14 * n23 * n42 + n14 * n22 * n43 - n12 * n24 * n43 - n13 * n22 * n44 + n12 * n23 * n44,\n\t\t\tt14 = n14 * n23 * n32 - n13 * n24 * n32 - n14 * n22 * n33 + n12 * n24 * n33 + n13 * n22 * n34 - n12 * n23 * n34;\n\n\t\tvar det = n11 * t11 + n21 * t12 + n31 * t13 + n41 * t14;\n\n\t\tif ( det === 0 ) return this.set( 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 );\n\n\t\tvar detInv = 1 / det;\n\n\t\tte[ 0 ] = t11 * detInv;\n\t\tte[ 1 ] = ( n24 * n33 * n41 - n23 * n34 * n41 - n24 * n31 * n43 + n21 * n34 * n43 + n23 * n31 * n44 - n21 * n33 * n44 ) * detInv;\n\t\tte[ 2 ] = ( n22 * n34 * n41 - n24 * n32 * n41 + n24 * n31 * n42 - n21 * n34 * n42 - n22 * n31 * n44 + n21 * n32 * n44 ) * detInv;\n\t\tte[ 3 ] = ( n23 * n32 * n41 - n22 * n33 * n41 - n23 * n31 * n42 + n21 * n33 * n42 + n22 * n31 * n43 - n21 * n32 * n43 ) * detInv;\n\n\t\tte[ 4 ] = t12 * detInv;\n\t\tte[ 5 ] = ( n13 * n34 * n41 - n14 * n33 * n41 + n14 * n31 * n43 - n11 * n34 * n43 - n13 * n31 * n44 + n11 * n33 * n44 ) * detInv;\n\t\tte[ 6 ] = ( n14 * n32 * n41 - n12 * n34 * n41 - n14 * n31 * n42 + n11 * n34 * n42 + n12 * n31 * n44 - n11 * n32 * n44 ) * detInv;\n\t\tte[ 7 ] = ( n12 * n33 * n41 - n13 * n32 * n41 + n13 * n31 * n42 - n11 * n33 * n42 - n12 * n31 * n43 + n11 * n32 * n43 ) * detInv;\n\n\t\tte[ 8 ] = t13 * detInv;\n\t\tte[ 9 ] = ( n14 * n23 * n41 - n13 * n24 * n41 - n14 * n21 * n43 + n11 * n24 * n43 + n13 * n21 * n44 - n11 * n23 * n44 ) * detInv;\n\t\tte[ 10 ] = ( n12 * n24 * n41 - n14 * n22 * n41 + n14 * n21 * n42 - n11 * n24 * n42 - n12 * n21 * n44 + n11 * n22 * n44 ) * detInv;\n\t\tte[ 11 ] = ( n13 * n22 * n41 - n12 * n23 * n41 - n13 * n21 * n42 + n11 * n23 * n42 + n12 * n21 * n43 - n11 * n22 * n43 ) * detInv;\n\n\t\tte[ 12 ] = t14 * detInv;\n\t\tte[ 13 ] = ( n13 * n24 * n31 - n14 * n23 * n31 + n14 * n21 * n33 - n11 * n24 * n33 - n13 * n21 * n34 + n11 * n23 * n34 ) * detInv;\n\t\tte[ 14 ] = ( n14 * n22 * n31 - n12 * n24 * n31 - n14 * n21 * n32 + n11 * n24 * n32 + n12 * n21 * n34 - n11 * n22 * n34 ) * detInv;\n\t\tte[ 15 ] = ( n12 * n23 * n31 - n13 * n22 * n31 + n13 * n21 * n32 - n11 * n23 * n32 - n12 * n21 * n33 + n11 * n22 * n33 ) * detInv;\n\n\t\treturn this;\n\n\t},\n\n\tscale: function ( v ) {\n\n\t\tvar te = this.elements;\n\t\tvar x = v.x, y = v.y, z = v.z;\n\n\t\tte[ 0 ] *= x; te[ 4 ] *= y; te[ 8 ] *= z;\n\t\tte[ 1 ] *= x; te[ 5 ] *= y; te[ 9 ] *= z;\n\t\tte[ 2 ] *= x; te[ 6 ] *= y; te[ 10 ] *= z;\n\t\tte[ 3 ] *= x; te[ 7 ] *= y; te[ 11 ] *= z;\n\n\t\treturn this;\n\n\t},\n\n\tgetMaxScaleOnAxis: function () {\n\n\t\tvar te = this.elements;\n\n\t\tvar scaleXSq = te[ 0 ] * te[ 0 ] + te[ 1 ] * te[ 1 ] + te[ 2 ] * te[ 2 ];\n\t\tvar scaleYSq = te[ 4 ] * te[ 4 ] + te[ 5 ] * te[ 5 ] + te[ 6 ] * te[ 6 ];\n\t\tvar scaleZSq = te[ 8 ] * te[ 8 ] + te[ 9 ] * te[ 9 ] + te[ 10 ] * te[ 10 ];\n\n\t\treturn Math.sqrt( Math.max( scaleXSq, scaleYSq, scaleZSq ) );\n\n\t},\n\n\tmakeTranslation: function ( x, y, z ) {\n\n\t\tthis.set(\n\n\t\t\t1, 0, 0, x,\n\t\t\t0, 1, 0, y,\n\t\t\t0, 0, 1, z,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t},\n\n\tmakeRotationX: function ( theta ) {\n\n\t\tvar c = Math.cos( theta ), s = Math.sin( theta );\n\n\t\tthis.set(\n\n\t\t\t1, 0, 0, 0,\n\t\t\t0, c, - s, 0,\n\t\t\t0, s, c, 0,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t},\n\n\tmakeRotationY: function ( theta ) {\n\n\t\tvar c = Math.cos( theta ), s = Math.sin( theta );\n\n\t\tthis.set(\n\n\t\t\t c, 0, s, 0,\n\t\t\t 0, 1, 0, 0,\n\t\t\t- s, 0, c, 0,\n\t\t\t 0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t},\n\n\tmakeRotationZ: function ( theta ) {\n\n\t\tvar c = Math.cos( theta ), s = Math.sin( theta );\n\n\t\tthis.set(\n\n\t\t\tc, - s, 0, 0,\n\t\t\ts, c, 0, 0,\n\t\t\t0, 0, 1, 0,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t},\n\n\tmakeRotationAxis: function ( axis, angle ) {\n\n\t\t// Based on http://www.gamedev.net/reference/articles/article1199.asp\n\n\t\tvar c = Math.cos( angle );\n\t\tvar s = Math.sin( angle );\n\t\tvar t = 1 - c;\n\t\tvar x = axis.x, y = axis.y, z = axis.z;\n\t\tvar tx = t * x, ty = t * y;\n\n\t\tthis.set(\n\n\t\t\ttx * x + c, tx * y - s * z, tx * z + s * y, 0,\n\t\t\ttx * y + s * z, ty * y + c, ty * z - s * x, 0,\n\t\t\ttx * z - s * y, ty * z + s * x, t * z * z + c, 0,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\t return this;\n\n\t},\n\n\tmakeScale: function ( x, y, z ) {\n\n\t\tthis.set(\n\n\t\t\tx, 0, 0, 0,\n\t\t\t0, y, 0, 0,\n\t\t\t0, 0, z, 0,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t},\n\n\tmakeShear: function ( x, y, z ) {\n\n\t\tthis.set(\n\n\t\t\t1, y, z, 0,\n\t\t\tx, 1, z, 0,\n\t\t\tx, y, 1, 0,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t},\n\n\tcompose: function ( position, quaternion, scale ) {\n\n\t\tvar te = this.elements;\n\n\t\tvar x = quaternion._x, y = quaternion._y, z = quaternion._z, w = quaternion._w;\n\t\tvar x2 = x + x,\ty2 = y + y, z2 = z + z;\n\t\tvar xx = x * x2, xy = x * y2, xz = x * z2;\n\t\tvar yy = y * y2, yz = y * z2, zz = z * z2;\n\t\tvar wx = w * x2, wy = w * y2, wz = w * z2;\n\n\t\tvar sx = scale.x, sy = scale.y, sz = scale.z;\n\n\t\tte[ 0 ] = ( 1 - ( yy + zz ) ) * sx;\n\t\tte[ 1 ] = ( xy + wz ) * sx;\n\t\tte[ 2 ] = ( xz - wy ) * sx;\n\t\tte[ 3 ] = 0;\n\n\t\tte[ 4 ] = ( xy - wz ) * sy;\n\t\tte[ 5 ] = ( 1 - ( xx + zz ) ) * sy;\n\t\tte[ 6 ] = ( yz + wx ) * sy;\n\t\tte[ 7 ] = 0;\n\n\t\tte[ 8 ] = ( xz + wy ) * sz;\n\t\tte[ 9 ] = ( yz - wx ) * sz;\n\t\tte[ 10 ] = ( 1 - ( xx + yy ) ) * sz;\n\t\tte[ 11 ] = 0;\n\n\t\tte[ 12 ] = position.x;\n\t\tte[ 13 ] = position.y;\n\t\tte[ 14 ] = position.z;\n\t\tte[ 15 ] = 1;\n\n\t\treturn this;\n\n\t},\n\n\tdecompose: function ( position, quaternion, scale ) {\n\n\t\tvar te = this.elements;\n\n\t\tvar sx = _v1.set( te[ 0 ], te[ 1 ], te[ 2 ] ).length();\n\t\tvar sy = _v1.set( te[ 4 ], te[ 5 ], te[ 6 ] ).length();\n\t\tvar sz = _v1.set( te[ 8 ], te[ 9 ], te[ 10 ] ).length();\n\n\t\t// if determine is negative, we need to invert one scale\n\t\tvar det = this.determinant();\n\t\tif ( det < 0 ) sx = - sx;\n\n\t\tposition.x = te[ 12 ];\n\t\tposition.y = te[ 13 ];\n\t\tposition.z = te[ 14 ];\n\n\t\t// scale the rotation part\n\t\t_m1.copy( this );\n\n\t\tvar invSX = 1 / sx;\n\t\tvar invSY = 1 / sy;\n\t\tvar invSZ = 1 / sz;\n\n\t\t_m1.elements[ 0 ] *= invSX;\n\t\t_m1.elements[ 1 ] *= invSX;\n\t\t_m1.elements[ 2 ] *= invSX;\n\n\t\t_m1.elements[ 4 ] *= invSY;\n\t\t_m1.elements[ 5 ] *= invSY;\n\t\t_m1.elements[ 6 ] *= invSY;\n\n\t\t_m1.elements[ 8 ] *= invSZ;\n\t\t_m1.elements[ 9 ] *= invSZ;\n\t\t_m1.elements[ 10 ] *= invSZ;\n\n\t\tquaternion.setFromRotationMatrix( _m1 );\n\n\t\tscale.x = sx;\n\t\tscale.y = sy;\n\t\tscale.z = sz;\n\n\t\treturn this;\n\n\t},\n\n\tmakePerspective: function ( left, right, top, bottom, near, far ) {\n\n\t\tif ( far === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.' );\n\n\t\t}\n\n\t\tvar te = this.elements;\n\t\tvar x = 2 * near / ( right - left );\n\t\tvar y = 2 * near / ( top - bottom );\n\n\t\tvar a = ( right + left ) / ( right - left );\n\t\tvar b = ( top + bottom ) / ( top - bottom );\n\t\tvar c = - ( far + near ) / ( far - near );\n\t\tvar d = - 2 * far * near / ( far - near );\n\n\t\tte[ 0 ] = x;\tte[ 4 ] = 0;\tte[ 8 ] = a;\tte[ 12 ] = 0;\n\t\tte[ 1 ] = 0;\tte[ 5 ] = y;\tte[ 9 ] = b;\tte[ 13 ] = 0;\n\t\tte[ 2 ] = 0;\tte[ 6 ] = 0;\tte[ 10 ] = c;\tte[ 14 ] = d;\n\t\tte[ 3 ] = 0;\tte[ 7 ] = 0;\tte[ 11 ] = - 1;\tte[ 15 ] = 0;\n\n\t\treturn this;\n\n\t},\n\n\tmakeOrthographic: function ( left, right, top, bottom, near, far ) {\n\n\t\tvar te = this.elements;\n\t\tvar w = 1.0 / ( right - left );\n\t\tvar h = 1.0 / ( top - bottom );\n\t\tvar p = 1.0 / ( far - near );\n\n\t\tvar x = ( right + left ) * w;\n\t\tvar y = ( top + bottom ) * h;\n\t\tvar z = ( far + near ) * p;\n\n\t\tte[ 0 ] = 2 * w;\tte[ 4 ] = 0;\tte[ 8 ] = 0;\tte[ 12 ] = - x;\n\t\tte[ 1 ] = 0;\tte[ 5 ] = 2 * h;\tte[ 9 ] = 0;\tte[ 13 ] = - y;\n\t\tte[ 2 ] = 0;\tte[ 6 ] = 0;\tte[ 10 ] = - 2 * p;\tte[ 14 ] = - z;\n\t\tte[ 3 ] = 0;\tte[ 7 ] = 0;\tte[ 11 ] = 0;\tte[ 15 ] = 1;\n\n\t\treturn this;\n\n\t},\n\n\tequals: function ( matrix ) {\n\n\t\tvar te = this.elements;\n\t\tvar me = matrix.elements;\n\n\t\tfor ( var i = 0; i < 16; i ++ ) {\n\n\t\t\tif ( te[ i ] !== me[ i ] ) return false;\n\n\t\t}\n\n\t\treturn true;\n\n\t},\n\n\tfromArray: function ( array, offset ) {\n\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tfor ( var i = 0; i < 16; i ++ ) {\n\n\t\t\tthis.elements[ i ] = array[ i + offset ];\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\ttoArray: function ( array, offset ) {\n\n\t\tif ( array === undefined ) array = [];\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tvar te = this.elements;\n\n\t\tarray[ offset ] = te[ 0 ];\n\t\tarray[ offset + 1 ] = te[ 1 ];\n\t\tarray[ offset + 2 ] = te[ 2 ];\n\t\tarray[ offset + 3 ] = te[ 3 ];\n\n\t\tarray[ offset + 4 ] = te[ 4 ];\n\t\tarray[ offset + 5 ] = te[ 5 ];\n\t\tarray[ offset + 6 ] = te[ 6 ];\n\t\tarray[ offset + 7 ] = te[ 7 ];\n\n\t\tarray[ offset + 8 ] = te[ 8 ];\n\t\tarray[ offset + 9 ] = te[ 9 ];\n\t\tarray[ offset + 10 ] = te[ 10 ];\n\t\tarray[ offset + 11 ] = te[ 11 ];\n\n\t\tarray[ offset + 12 ] = te[ 12 ];\n\t\tarray[ offset + 13 ] = te[ 13 ];\n\t\tarray[ offset + 14 ] = te[ 14 ];\n\t\tarray[ offset + 15 ] = te[ 15 ];\n\n\t\treturn array;\n\n\t}\n\n} );\n\n\nexport { Matrix4 };\n"]},"metadata":{},"sourceType":"module"}