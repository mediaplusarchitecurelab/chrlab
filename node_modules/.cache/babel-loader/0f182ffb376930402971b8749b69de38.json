{"ast":null,"code":"import * as THREE from 'three';\n\nclass agentRA {\n  constructor(h, scene) {\n    this.prop = {\n      id: 'ra_Z',\n      agv: null,\n      contain: null,\n      height: h,\n      basecen: new THREE.Vector3(0, 0, 0),\n      size: new THREE.Vector3(35.0, 1.0, 35.0),\n      state: 0,\n      mesh: new THREE.Group(),\n      mat: new THREE.MeshBasicMaterial({\n        color: 0x0000ff,\n        opacity: 0.8,\n        transparent: true\n      }),\n      scene: scene\n    };\n    this.init();\n  }\n\n  init() {\n    const geop = new THREE.BoxBufferGeometry(this.prop.size.x, this.prop.size.y, this.prop.size.z);\n    const geoc = new THREE.BoxBufferGeometry(10, this.prop.height, 10);\n    var p = new THREE.Mesh(geop, this.prop.mat);\n    p.position.set(0, this.prop.height, 0);\n    var c = new THREE.Mesh(geoc, this.prop.mat);\n    c.position.set(0, this.prop.height * 0.5, 0);\n    this.prop.mesh.add(p);\n    this.prop.mesh.add(c);\n    this.prop.scene.add(this.prop.mesh);\n  }\n\n  setAGV(v) {\n    // Vector3\n    this.prop.agv = v;\n    this.prop.agv.prop.ra = this;\n    this.prop.mesh.position.set(this.prop.agv.prop.basecen.x, this.prop.agv.prop.basecen.y + this.prop.agv.prop.size.y, this.prop.agv.prop.basecen.z);\n  }\n\n  agvUpdate() {\n    if (this.prop.agv) {\n      this.prop.mesh.position.set(this.prop.agv.prop.basecen.x, this.prop.agv.prop.basecen.y + this.prop.agv.prop.size.y, this.prop.agv.prop.basecen.z);\n      this.prop.basecen = new THREE.Vector3(this.prop.agv.prop.basecen.x, this.prop.agv.prop.basecen.y + this.prop.agv.prop.size.y + this.prop.height, this.prop.agv.prop.basecen.z);\n    } else {\n      console.log('not assign agv');\n    }\n  }\n\n  setHeight(v) {\n    var oh = parseFloat(this.prop.height.toString());\n    this.prop.height = v;\n\n    if (this.prop.mesh) {\n      let p = this.prop.mesh.children[0];\n      let c = this.prop.mesh.children[1];\n      p.position.set(0, this.prop.height, 0); // 避免超過 boundary\n\n      if (this.prop.height / oh < 1) {\n        c.geometry.scale(1, this.prop.height / oh, 1);\n      }\n\n      c.position.set(0, this.prop.height * 0.5, 0);\n    }\n  }\n\n  setSize(v) {\n    this.prop.size = v;\n    this.setPosition(this.prop.basecen);\n  }\n\n  setContain(v) {\n    this.prop.contain = v;\n    this.prop.state = 1;\n  }\n\n  setRemove() {\n    this.prop.contain = null;\n    this.prop.state = 0;\n  }\n\n}\n\nexport default agentRA;","map":{"version":3,"sources":["D:/chrlab/src/component/panelComponent/Canvas/StorageStorejs/threejs/agentRA.js"],"names":["THREE","agentRA","constructor","h","scene","prop","id","agv","contain","height","basecen","Vector3","size","state","mesh","Group","mat","MeshBasicMaterial","color","opacity","transparent","init","geop","BoxBufferGeometry","x","y","z","geoc","p","Mesh","position","set","c","add","setAGV","v","ra","agvUpdate","console","log","setHeight","oh","parseFloat","toString","children","geometry","scale","setSize","setPosition","setContain","setRemove"],"mappings":"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","sourcesContent":["import * as THREE from 'three';\r\n\r\nclass agentRA {\r\n    constructor(h, scene) {\r\n        this.prop ={\r\n            id:'ra_Z',\r\n            agv:null,\r\n            contain:null,\r\n            height:h,\r\n            basecen:new THREE.Vector3(0,0,0),\r\n            size:new THREE.Vector3(35.0,1.0,35.0),\r\n            state:0,\r\n            mesh:new THREE.Group(),\r\n            mat:new THREE.MeshBasicMaterial( {color: 0x0000ff, opacity: 0.8, transparent: true} ),\r\n            scene:scene\r\n        }\r\n       this.init();\r\n     }\r\n    init(){\r\n        const geop= new THREE.BoxBufferGeometry( this.prop.size.x, this.prop.size.y, this.prop.size.z );\r\n        const geoc= new THREE.BoxBufferGeometry( 10, this.prop.height, 10 );\r\n        var p  = new THREE.Mesh( geop, this.prop.mat );\r\n        p.position.set(0,this.prop.height,0);\r\n        var c  = new THREE.Mesh( geoc, this.prop.mat );\r\n        c.position.set(0,this.prop.height*0.5,0);\r\n        this.prop.mesh.add(p);\r\n        this.prop.mesh.add(c);\r\n        this.prop.scene.add(this.prop.mesh);\r\n    }\r\n    setAGV(v){ // Vector3\r\n        this.prop.agv=v;\r\n        this.prop.agv.prop.ra=this;\r\n        this.prop.mesh.position.set(this.prop.agv.prop.basecen.x,\r\n                                    this.prop.agv.prop.basecen.y+this.prop.agv.prop.size.y,\r\n                                    this.prop.agv.prop.basecen.z);\r\n    }\r\n    agvUpdate(){\r\n        if (this.prop.agv){\r\n            this.prop.mesh.position.set(this.prop.agv.prop.basecen.x,\r\n                                        this.prop.agv.prop.basecen.y+this.prop.agv.prop.size.y,\r\n                                        this.prop.agv.prop.basecen.z);\r\n            this.prop.basecen = new THREE.Vector3(  this.prop.agv.prop.basecen.x,\r\n                                                    this.prop.agv.prop.basecen.y+this.prop.agv.prop.size.y+this.prop.height,\r\n                                                    this.prop.agv.prop.basecen.z);\r\n        }else{\r\n            console.log('not assign agv')\r\n        }\r\n    }\r\n    setHeight(v){\r\n        var oh = parseFloat(this.prop.height.toString());\r\n        this.prop.height=v;\r\n        if (this.prop.mesh) {\r\n            let p = this.prop.mesh.children[0];\r\n            let c = this.prop.mesh.children[1];\r\n            p.position.set(0,this.prop.height,0);\r\n            // 避免超過 boundary\r\n            if (this.prop.height/oh <1){\r\n                c.geometry.scale(1,this.prop.height/oh,1);\r\n            }\r\n            c.position.set(0,this.prop.height*0.5,0);\r\n        }\r\n    }\r\n    setSize(v){\r\n        this.prop.size=v;\r\n        this.setPosition(this.prop.basecen);\r\n    }\r\n    setContain(v){\r\n        this.prop.contain=v;\r\n        this.prop.state=1;\r\n    }\r\n    setRemove(){\r\n        this.prop.contain=null;\r\n        this.prop.state=0;\r\n    }\r\n}\r\nexport default agentRA;"]},"metadata":{},"sourceType":"module"}