{"ast":null,"code":"import * as THREE from 'three';\nimport agentProduct from './agentProduct';\n\nclass agentSTOCK {\n  constructor(pv3, scene) {\n    this.prop = {\n      id: 'na',\n      type: 'p-3',\n      contain: [],\n      basecen: pv3,\n      rnp: 0,\n      open: new THREE.Vector3(-1, 0.0, 0.0),\n      size: new THREE.Vector3(75.0, 60.0, 80.0),\n      state: 1,\n      sel: false,\n      mesh: new THREE.Mesh(),\n      mat: new THREE.MeshBasicMaterial({\n        color: 0x10aaff,\n        opacity: 0.2,\n        transparent: true,\n        wireframe: true\n      }),\n      scene: scene,\n      dom: null\n    };\n    this.init();\n  }\n\n  init() {\n    const geo = new THREE.BoxBufferGeometry(this.prop.size.x, this.prop.size.y, this.prop.size.z);\n    this.prop.mesh = new THREE.Mesh(geo, this.prop.mat);\n    this.prop.scene.add(this.prop.mesh);\n    this.setPosition(this.prop.basecen); // dom\n\n    this.prop.dom = document.createElement('button');\n    this.prop.dom.id = this.prop.id + '-btn';\n    this.prop.dom.innerHTML = '+';\n    this.prop.dom.style.fontSize = '11px';\n    this.prop.dom.style.padding = '1px';\n    this.prop.dom.style.margin = '1px';\n    this.prop.dom.style.backgroundColor = 'rgba(0,0,0)';\n    this.prop.dom.style.color = 'white';\n    this.prop.dom.style.border = 'none';\n    this.prop.dom.style.cursor = 'pointer';\n    this.prop.dom.addEventListener(\"mouseenter\", () => {\n      this.prop.dom.style.backgroundColor = 'rgba(255,0,0,0.8)';\n    });\n    this.prop.dom.addEventListener(\"mouseout\", () => {\n      this.prop.dom.style.backgroundColor = 'rgba(0,0,0)';\n    });\n    this.prop.dom.addEventListener(\"click\", () => {\n      let np = new agentProduct(this.prop.basecen, this.prop.type, this.prop.scene);\n      np.setId('psn-' + this.prop.type + '-rnp-' + this.prop.rnp);\n      this.prop.rnp += 1;\n      this.addContain(np);\n    });\n  }\n\n  setPosition(v) {\n    // Vector3\n    this.prop.basecen = v; // Hight modify\n\n    this.prop.mesh.position.set(this.prop.basecen.x, this.prop.basecen.y + this.prop.size.y * 0.5, this.prop.basecen.z);\n  }\n\n  setType(v) {\n    this.prop.type = v;\n  }\n\n  setSel() {\n    this.prop.sel = true;\n  }\n\n  setDesel() {\n    this.prop.sel = false;\n  }\n\n  setId(v) {\n    this.prop.id = v;\n  }\n\n  setSize(v) {\n    this.prop.size = v;\n    this.setPosition(this.prop.basecen);\n  }\n\n  addContain(v) {\n    let f = -1;\n    this.prop.contain.some((p, i) => {\n      if (p.prop.id === v.prop.id) {\n        f = i;\n        return true;\n      }\n    });\n\n    if (f < 0) {\n      this.prop.contain.push(v);\n      v.setPosition(this.prop.basecen);\n    }\n\n    this.prop.state = this.prop.contain.length;\n  }\n\n  setRemove(v) {\n    let f = -1;\n    this.prop.contain.some((p, i) => {\n      if (p.prop.id === v.prop.id) {\n        f = i;\n        return true;\n      }\n    });\n\n    if (f >= 0) {\n      this.prop.contain.splice(f, 1);\n    }\n\n    this.prop.state = this.prop.contain.length;\n  }\n\n  getInfo() {\n    let t = '';\n\n    if (this.prop.sel) {\n      t = '<li id=\"' + this.prop.id + '\" style=\"color:yellow;\">' + this.prop.id + '(' + this.prop.type + ') : ' + this.prop.state + ' </li >';\n    } else {\n      if (this.prop.state === 0) {\n        t = '<li id=\"' + this.prop.id + '\" style=\"color:red;\">' + this.prop.id + '(' + this.prop.type + ') : ' + this.prop.state + ' </li >';\n      } else {\n        t = '<li id=\"' + this.prop.id + '\" >' + this.prop.id + '(' + this.prop.type + ') : ' + this.prop.state + ' </li >';\n      }\n    }\n\n    return t;\n  }\n\n  assignDom() {\n    document.getElementById(this.prop.id).appendChild(this.prop.dom);\n  }\n\n}\n\nexport default agentSTOCK;","map":{"version":3,"sources":["D:/chrlab/src/component/panelComponent/Canvas/StorageStorejs/threejs/agentSTOCK.js"],"names":["THREE","agentProduct","agentSTOCK","constructor","pv3","scene","prop","id","type","contain","basecen","rnp","open","Vector3","size","state","sel","mesh","Mesh","mat","MeshBasicMaterial","color","opacity","transparent","wireframe","dom","init","geo","BoxBufferGeometry","x","y","z","add","setPosition","document","createElement","innerHTML","style","fontSize","padding","margin","backgroundColor","border","cursor","addEventListener","np","setId","addContain","v","position","set","setType","setSel","setDesel","setSize","f","some","p","i","push","length","setRemove","splice","getInfo","t","assignDom","getElementById","appendChild"],"mappings":"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","sourcesContent":["import * as THREE from 'three';\r\nimport agentProduct from './agentProduct';\r\n\r\nclass agentSTOCK {\r\n    constructor(pv3,scene) {\r\n        this.prop ={\r\n            id:'na',\r\n            type:'p-3',\r\n            contain:[],\r\n            basecen:pv3,\r\n            rnp:0,\r\n            open:new THREE.Vector3(-1,0.0,0.0),\r\n            size:new THREE.Vector3(75.0,60.0,80.0),\r\n            state:1,\r\n            sel:false,\r\n            mesh:new THREE.Mesh(),\r\n            mat:new THREE.MeshBasicMaterial( {color: 0x10aaff, opacity: 0.2, transparent: true, wireframe:true} ),\r\n            scene:scene,\r\n            dom:null\r\n        }\r\n       this.init();\r\n     }\r\n    init(){\r\n        const geo= new THREE.BoxBufferGeometry( this.prop.size.x, this.prop.size.y, this.prop.size.z );\r\n        this.prop.mesh  = new THREE.Mesh( geo, this.prop.mat );\r\n        this.prop.scene.add(this.prop.mesh);\r\n        this.setPosition( this.prop.basecen);\r\n        // dom\r\n        this.prop.dom = document.createElement('button');\r\n        this.prop.dom.id = this.prop.id+'-btn';\r\n        this.prop.dom.innerHTML = '+';\r\n        this.prop.dom.style.fontSize='11px';\r\n        this.prop.dom.style.padding='1px';\r\n        this.prop.dom.style.margin='1px';\r\n        this.prop.dom.style.backgroundColor='rgba(0,0,0)';\r\n        this.prop.dom.style.color='white';\r\n        this.prop.dom.style.border='none';\r\n        this.prop.dom.style.cursor='pointer';\r\n        this.prop.dom.addEventListener(\"mouseenter\",()=> {\r\n            this.prop.dom.style.backgroundColor='rgba(255,0,0,0.8)';\r\n        });\r\n        this.prop.dom.addEventListener(\"mouseout\",()=> {\r\n            this.prop.dom.style.backgroundColor='rgba(0,0,0)';\r\n        });\r\n        this.prop.dom.addEventListener(\"click\",()=> {\r\n            let np = new agentProduct(this.prop.basecen,this.prop.type,this.prop.scene);\r\n            np.setId('psn-'+this.prop.type+'-rnp-'+this.prop.rnp);\r\n            this.prop.rnp+=1;\r\n            this.addContain(np);\r\n        });\r\n    }\r\n    setPosition(v){ // Vector3\r\n        this.prop.basecen=v;\r\n        // Hight modify\r\n        this.prop.mesh.position.set(this.prop.basecen.x,this.prop.basecen.y+this.prop.size.y*0.5,this.prop.basecen.z);\r\n    }\r\n    setType(v){\r\n        this.prop.type=v;\r\n    }\r\n    setSel(){\r\n        this.prop.sel=true;\r\n    }\r\n    setDesel(){\r\n        this.prop.sel=false;\r\n    }\r\n    setId(v){\r\n        this.prop.id=v;\r\n    }\r\n    setSize(v){\r\n        this.prop.size=v;\r\n        this.setPosition(this.prop.basecen);\r\n    }\r\n    addContain(v){\r\n        let f = -1;\r\n        this.prop.contain.some((p,i)=>{\r\n                    if(p.prop.id===v.prop.id){\r\n                        f =i;\r\n                        return true;\r\n                    }\r\n        });\r\n        if (f<0){\r\n            this.prop.contain.push(v);\r\n            v.setPosition(this.prop.basecen);\r\n        }\r\n        this.prop.state=this.prop.contain.length;\r\n    }\r\n    setRemove(v){\r\n        let f = -1;\r\n        this.prop.contain.some((p,i)=>{\r\n                if(p.prop.id===v.prop.id){\r\n                    f = i;\r\n                    return true;\r\n                }\r\n        });\r\n        if (f>=0){\r\n            this.prop.contain.splice(f, 1);\r\n        }\r\n        this.prop.state=this.prop.contain.length;\r\n    }\r\n    getInfo(){\r\n        let t = '';\r\n        if (this.prop.sel){\r\n            t='<li id=\"'+this.prop.id+'\" style=\"color:yellow;\">'+this.prop.id+'('+this.prop.type+') : '+this.prop.state+' </li >';\r\n        }else{\r\n            if (this.prop.state===0){\r\n                t='<li id=\"'+this.prop.id+'\" style=\"color:red;\">'+this.prop.id+'('+this.prop.type+') : '+this.prop.state+' </li >';\r\n            }else{\r\n                t='<li id=\"'+this.prop.id+'\" >'+this.prop.id+'('+this.prop.type+') : '+this.prop.state+' </li >';\r\n            }\r\n        }\r\n        return t;\r\n    }\r\n    assignDom(){\r\n        document.getElementById(this.prop.id).appendChild(this.prop.dom);\r\n    }\r\n}\r\nexport default agentSTOCK;"]},"metadata":{},"sourceType":"module"}