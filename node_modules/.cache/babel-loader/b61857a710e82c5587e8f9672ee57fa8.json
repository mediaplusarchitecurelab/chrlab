{"ast":null,"code":"import { Vector3 } from './Vector3.js';\n/**\n * @author bhouston / http://clara.io\n * @author WestLangley / http://github.com/WestLangley\n *\n * Primary reference:\n *   https://graphics.stanford.edu/papers/envmap/envmap.pdf\n *\n * Secondary reference:\n *   https://www.ppsloan.org/publications/StupidSH36.pdf\n */\n// 3-band SH defined by 9 coefficients\n\nfunction SphericalHarmonics3() {\n  this.coefficients = [];\n\n  for (var i = 0; i < 9; i++) {\n    this.coefficients.push(new Vector3());\n  }\n}\n\nObject.assign(SphericalHarmonics3.prototype, {\n  isSphericalHarmonics3: true,\n  set: function (coefficients) {\n    for (var i = 0; i < 9; i++) {\n      this.coefficients[i].copy(coefficients[i]);\n    }\n\n    return this;\n  },\n  zero: function () {\n    for (var i = 0; i < 9; i++) {\n      this.coefficients[i].set(0, 0, 0);\n    }\n\n    return this;\n  },\n  // get the radiance in the direction of the normal\n  // target is a Vector3\n  getAt: function (normal, target) {\n    // normal is assumed to be unit length\n    var x = normal.x,\n        y = normal.y,\n        z = normal.z;\n    var coeff = this.coefficients; // band 0\n\n    target.copy(coeff[0]).multiplyScalar(0.282095); // band 1\n\n    target.addScaledVector(coeff[1], 0.488603 * y);\n    target.addScaledVector(coeff[2], 0.488603 * z);\n    target.addScaledVector(coeff[3], 0.488603 * x); // band 2\n\n    target.addScaledVector(coeff[4], 1.092548 * (x * y));\n    target.addScaledVector(coeff[5], 1.092548 * (y * z));\n    target.addScaledVector(coeff[6], 0.315392 * (3.0 * z * z - 1.0));\n    target.addScaledVector(coeff[7], 1.092548 * (x * z));\n    target.addScaledVector(coeff[8], 0.546274 * (x * x - y * y));\n    return target;\n  },\n  // get the irradiance (radiance convolved with cosine lobe) in the direction of the normal\n  // target is a Vector3\n  // https://graphics.stanford.edu/papers/envmap/envmap.pdf\n  getIrradianceAt: function (normal, target) {\n    // normal is assumed to be unit length\n    var x = normal.x,\n        y = normal.y,\n        z = normal.z;\n    var coeff = this.coefficients; // band 0\n\n    target.copy(coeff[0]).multiplyScalar(0.886227); // π * 0.282095\n    // band 1\n\n    target.addScaledVector(coeff[1], 2.0 * 0.511664 * y); // ( 2 * π / 3 ) * 0.488603\n\n    target.addScaledVector(coeff[2], 2.0 * 0.511664 * z);\n    target.addScaledVector(coeff[3], 2.0 * 0.511664 * x); // band 2\n\n    target.addScaledVector(coeff[4], 2.0 * 0.429043 * x * y); // ( π / 4 ) * 1.092548\n\n    target.addScaledVector(coeff[5], 2.0 * 0.429043 * y * z);\n    target.addScaledVector(coeff[6], 0.743125 * z * z - 0.247708); // ( π / 4 ) * 0.315392 * 3\n\n    target.addScaledVector(coeff[7], 2.0 * 0.429043 * x * z);\n    target.addScaledVector(coeff[8], 0.429043 * (x * x - y * y)); // ( π / 4 ) * 0.546274\n\n    return target;\n  },\n  add: function (sh) {\n    for (var i = 0; i < 9; i++) {\n      this.coefficients[i].add(sh.coefficients[i]);\n    }\n\n    return this;\n  },\n  addScaledSH: function (sh, s) {\n    for (var i = 0; i < 9; i++) {\n      this.coefficients[i].addScaledVector(sh.coefficients[i], s);\n    }\n\n    return this;\n  },\n  scale: function (s) {\n    for (var i = 0; i < 9; i++) {\n      this.coefficients[i].multiplyScalar(s);\n    }\n\n    return this;\n  },\n  lerp: function (sh, alpha) {\n    for (var i = 0; i < 9; i++) {\n      this.coefficients[i].lerp(sh.coefficients[i], alpha);\n    }\n\n    return this;\n  },\n  equals: function (sh) {\n    for (var i = 0; i < 9; i++) {\n      if (!this.coefficients[i].equals(sh.coefficients[i])) {\n        return false;\n      }\n    }\n\n    return true;\n  },\n  copy: function (sh) {\n    return this.set(sh.coefficients);\n  },\n  clone: function () {\n    return new this.constructor().copy(this);\n  },\n  fromArray: function (array, offset) {\n    if (offset === undefined) offset = 0;\n    var coefficients = this.coefficients;\n\n    for (var i = 0; i < 9; i++) {\n      coefficients[i].fromArray(array, offset + i * 3);\n    }\n\n    return this;\n  },\n  toArray: function (array, offset) {\n    if (array === undefined) array = [];\n    if (offset === undefined) offset = 0;\n    var coefficients = this.coefficients;\n\n    for (var i = 0; i < 9; i++) {\n      coefficients[i].toArray(array, offset + i * 3);\n    }\n\n    return array;\n  }\n});\nObject.assign(SphericalHarmonics3, {\n  // evaluate the basis functions\n  // shBasis is an Array[ 9 ]\n  getBasisAt: function (normal, shBasis) {\n    // normal is assumed to be unit length\n    var x = normal.x,\n        y = normal.y,\n        z = normal.z; // band 0\n\n    shBasis[0] = 0.282095; // band 1\n\n    shBasis[1] = 0.488603 * y;\n    shBasis[2] = 0.488603 * z;\n    shBasis[3] = 0.488603 * x; // band 2\n\n    shBasis[4] = 1.092548 * x * y;\n    shBasis[5] = 1.092548 * y * z;\n    shBasis[6] = 0.315392 * (3 * z * z - 1);\n    shBasis[7] = 1.092548 * x * z;\n    shBasis[8] = 0.546274 * (x * x - y * y);\n  }\n});\nexport { SphericalHarmonics3 };","map":{"version":3,"sources":["H:/chrlab/src/component/panelComponent/Canvas/threejs/src/math/SphericalHarmonics3.js"],"names":["Vector3","SphericalHarmonics3","coefficients","i","push","Object","assign","prototype","isSphericalHarmonics3","set","copy","zero","getAt","normal","target","x","y","z","coeff","multiplyScalar","addScaledVector","getIrradianceAt","add","sh","addScaledSH","s","scale","lerp","alpha","equals","clone","constructor","fromArray","array","offset","undefined","toArray","getBasisAt","shBasis"],"mappings":"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","sourcesContent":["import { Vector3 } from './Vector3.js';\n\n/**\n * @author bhouston / http://clara.io\n * @author WestLangley / http://github.com/WestLangley\n *\n * Primary reference:\n *   https://graphics.stanford.edu/papers/envmap/envmap.pdf\n *\n * Secondary reference:\n *   https://www.ppsloan.org/publications/StupidSH36.pdf\n */\n\n// 3-band SH defined by 9 coefficients\n\nfunction SphericalHarmonics3() {\n\n\tthis.coefficients = [];\n\n\tfor ( var i = 0; i < 9; i ++ ) {\n\n\t\tthis.coefficients.push( new Vector3() );\n\n\t}\n\n}\n\nObject.assign( SphericalHarmonics3.prototype, {\n\n\tisSphericalHarmonics3: true,\n\n\tset: function ( coefficients ) {\n\n\t\tfor ( var i = 0; i < 9; i ++ ) {\n\n\t\t\tthis.coefficients[ i ].copy( coefficients[ i ] );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tzero: function () {\n\n\t\tfor ( var i = 0; i < 9; i ++ ) {\n\n\t\t\tthis.coefficients[ i ].set( 0, 0, 0 );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\t// get the radiance in the direction of the normal\n\t// target is a Vector3\n\tgetAt: function ( normal, target ) {\n\n\t\t// normal is assumed to be unit length\n\n\t\tvar x = normal.x, y = normal.y, z = normal.z;\n\n\t\tvar coeff = this.coefficients;\n\n\t\t// band 0\n\t\ttarget.copy( coeff[ 0 ] ).multiplyScalar( 0.282095 );\n\n\t\t// band 1\n\t\ttarget.addScaledVector( coeff[ 1 ], 0.488603 * y );\n\t\ttarget.addScaledVector( coeff[ 2 ], 0.488603 * z );\n\t\ttarget.addScaledVector( coeff[ 3 ], 0.488603 * x );\n\n\t\t// band 2\n\t\ttarget.addScaledVector( coeff[ 4 ], 1.092548 * ( x * y ) );\n\t\ttarget.addScaledVector( coeff[ 5 ], 1.092548 * ( y * z ) );\n\t\ttarget.addScaledVector( coeff[ 6 ], 0.315392 * ( 3.0 * z * z - 1.0 ) );\n\t\ttarget.addScaledVector( coeff[ 7 ], 1.092548 * ( x * z ) );\n\t\ttarget.addScaledVector( coeff[ 8 ], 0.546274 * ( x * x - y * y ) );\n\n\t\treturn target;\n\n\t},\n\n\t// get the irradiance (radiance convolved with cosine lobe) in the direction of the normal\n\t// target is a Vector3\n\t// https://graphics.stanford.edu/papers/envmap/envmap.pdf\n\tgetIrradianceAt: function ( normal, target ) {\n\n\t\t// normal is assumed to be unit length\n\n\t\tvar x = normal.x, y = normal.y, z = normal.z;\n\n\t\tvar coeff = this.coefficients;\n\n\t\t// band 0\n\t\ttarget.copy( coeff[ 0 ] ).multiplyScalar( 0.886227 ); // π * 0.282095\n\n\t\t// band 1\n\t\ttarget.addScaledVector( coeff[ 1 ], 2.0 * 0.511664 * y ); // ( 2 * π / 3 ) * 0.488603\n\t\ttarget.addScaledVector( coeff[ 2 ], 2.0 * 0.511664 * z );\n\t\ttarget.addScaledVector( coeff[ 3 ], 2.0 * 0.511664 * x );\n\n\t\t// band 2\n\t\ttarget.addScaledVector( coeff[ 4 ], 2.0 * 0.429043 * x * y ); // ( π / 4 ) * 1.092548\n\t\ttarget.addScaledVector( coeff[ 5 ], 2.0 * 0.429043 * y * z );\n\t\ttarget.addScaledVector( coeff[ 6 ], 0.743125 * z * z - 0.247708 ); // ( π / 4 ) * 0.315392 * 3\n\t\ttarget.addScaledVector( coeff[ 7 ], 2.0 * 0.429043 * x * z );\n\t\ttarget.addScaledVector( coeff[ 8 ], 0.429043 * ( x * x - y * y ) ); // ( π / 4 ) * 0.546274\n\n\t\treturn target;\n\n\t},\n\n\tadd: function ( sh ) {\n\n\t\tfor ( var i = 0; i < 9; i ++ ) {\n\n\t\t\tthis.coefficients[ i ].add( sh.coefficients[ i ] );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\taddScaledSH: function ( sh, s ) {\n\n\t\tfor ( var i = 0; i < 9; i ++ ) {\n\n\t\t\tthis.coefficients[ i ].addScaledVector( sh.coefficients[ i ], s );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tscale: function ( s ) {\n\n\t\tfor ( var i = 0; i < 9; i ++ ) {\n\n\t\t\tthis.coefficients[ i ].multiplyScalar( s );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tlerp: function ( sh, alpha ) {\n\n\t\tfor ( var i = 0; i < 9; i ++ ) {\n\n\t\t\tthis.coefficients[ i ].lerp( sh.coefficients[ i ], alpha );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tequals: function ( sh ) {\n\n\t\tfor ( var i = 0; i < 9; i ++ ) {\n\n\t\t\tif ( ! this.coefficients[ i ].equals( sh.coefficients[ i ] ) ) {\n\n\t\t\t\treturn false;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn true;\n\n\t},\n\n\tcopy: function ( sh ) {\n\n\t\treturn this.set( sh.coefficients );\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t},\n\n\tfromArray: function ( array, offset ) {\n\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tvar coefficients = this.coefficients;\n\n\t\tfor ( var i = 0; i < 9; i ++ ) {\n\n\t\t\tcoefficients[ i ].fromArray( array, offset + ( i * 3 ) );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\ttoArray: function ( array, offset ) {\n\n\t\tif ( array === undefined ) array = [];\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tvar coefficients = this.coefficients;\n\n\t\tfor ( var i = 0; i < 9; i ++ ) {\n\n\t\t\tcoefficients[ i ].toArray( array, offset + ( i * 3 ) );\n\n\t\t}\n\n\t\treturn array;\n\n\t}\n\n} );\n\nObject.assign( SphericalHarmonics3, {\n\n\t// evaluate the basis functions\n\t// shBasis is an Array[ 9 ]\n\tgetBasisAt: function ( normal, shBasis ) {\n\n\t\t// normal is assumed to be unit length\n\n\t\tvar x = normal.x, y = normal.y, z = normal.z;\n\n\t\t// band 0\n\t\tshBasis[ 0 ] = 0.282095;\n\n\t\t// band 1\n\t\tshBasis[ 1 ] = 0.488603 * y;\n\t\tshBasis[ 2 ] = 0.488603 * z;\n\t\tshBasis[ 3 ] = 0.488603 * x;\n\n\t\t// band 2\n\t\tshBasis[ 4 ] = 1.092548 * x * y;\n\t\tshBasis[ 5 ] = 1.092548 * y * z;\n\t\tshBasis[ 6 ] = 0.315392 * ( 3 * z * z - 1 );\n\t\tshBasis[ 7 ] = 1.092548 * x * z;\n\t\tshBasis[ 8 ] = 0.546274 * ( x * x - y * y );\n\n\t}\n\n} );\n\nexport { SphericalHarmonics3 };\n"]},"metadata":{},"sourceType":"module"}